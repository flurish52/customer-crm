import{m as v,D as x,g as n,i as k,o as u,b as t,e as p,k as l,K as m,P as c,F as w,q as h,t as j,z as g}from"./app-BMne5a8i.js";import{_ as C}from"./_plugin-vue_export-helper-DlAUqK2U.js";const V={class:"bg-white rounded-xl shadow-lg w-full max-w-md max-h-[90vh] overflow-y-auto transform transition-all duration-300"},J={class:"p-6"},M={key:0,class:"mb-6"},B={key:1,class:"mb-6"},D=["value"],E={class:"mb-6"},U={class:"mb-6"},S={class:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6"},T={class:"mb-6"},O={__name:"CreateJob",props:{showModal:Boolean,customer:Object,isEditingJob:Boolean,jobToEdit:Object,allCustomers:Array},emits:["close","submit"],setup(i,{emit:f}){const s=i,a=f,o=v({}),b=()=>{a("close"),o.value={customer_id:s.customer.id,job_title:"",description:"",status:"pending",amount:0,due_date:""}};x(()=>s.isEditingJob,d=>{d?o.value={...s.jobToEdit}:o.value={customer_id:s.customer.id,job_title:"",description:"",status:"pending",amount:0,due_date:""}},{immediate:!0});const y=()=>{let d=o.value;s.isEditingJob?g.patch(`/update_job/${s.jobToEdit.id}`,d).then(e=>{a("submit",{payload:e.data.jobs}),a("close"),o.value={customer_id:s.customer.id,job_title:"",description:"",status:"pending",amount:0,due_date:""},alert(e.data.message),console.log(e.data)}):g.post("/store_job",d).then(e=>{o.value={customer_id:s.customer.id,job_title:"",description:"",status:"pending",amount:0,due_date:""},a("submit",{payload:e.data.jobs}),a("close"),alert(e.data.message)}).catch(e=>{console.error("API error:",e)})};return(d,e)=>i.showModal?(u(),n("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 transition-opacity duration-300",onClick:p(b,["self"])},[t("div",V,[t("div",{class:"sticky top-0 bg-white p-6 border-b border-tertiary-light flex justify-between items-center"},[e[8]||(e[8]=t("h2",{class:"text-xl font-bold text-primary-dark"},"Create New Job",-1)),t("button",{onClick:b,class:"text-gray-400 hover:text-gray-500"},e[7]||(e[7]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),t("div",J,[t("form",{onSubmit:p(y,["prevent"])},[i.customer&&Object.keys(i.customer).length?(u(),n("div",M,[e[9]||(e[9]=t("label",{class:"block text-sm font-medium text-primary-dark mb-2"},"Customer *",-1)),l(t("input",{"onUpdate:modelValue":e[0]||(e[0]=r=>i.customer.name=r),type:"text",disabled:"",class:"w-full border border-tertiary-dark rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-primary-light focus:border-primary-light",placeholder:"Website Redesign"},null,512),[[m,i.customer.name]])])):(u(),n("div",B,[e[11]||(e[11]=t("label",{class:"block text-sm font-medium text-primary-dark mb-2"},"Customer *",-1)),l(t("select",{"onUpdate:modelValue":e[1]||(e[1]=r=>o.value.customer_id=r),class:"w-full border border-tertiary-dark rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-primary-light focus:border-primary-light"},[e[10]||(e[10]=t("option",{disabled:"",value:""},"Select a customer",-1)),(u(!0),n(w,null,h(i.allCustomers,r=>(u(),n("option",{key:r.id,value:r.id},j(r.name),9,D))),128))],512),[[c,o.value.customer_id]])])),t("div",E,[e[12]||(e[12]=t("label",{class:"block text-sm font-medium text-primary-dark mb-2"},"Job Title *",-1)),l(t("input",{"onUpdate:modelValue":e[2]||(e[2]=r=>o.value.job_title=r),type:"text",required:"",class:"w-full border border-tertiary-dark rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-primary-light focus:border-primary-light",placeholder:"Website Redesign"},null,512),[[m,o.value.job_title]])]),t("div",U,[e[13]||(e[13]=t("label",{class:"block text-sm font-medium text-primary-dark mb-2"},"Description",-1)),l(t("textarea",{"onUpdate:modelValue":e[3]||(e[3]=r=>o.value.description=r),rows:"3",class:"w-full border border-tertiary-dark rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-primary-light focus:border-primary-light",placeholder:"Brief description of the job..."},null,512),[[m,o.value.description]])]),t("div",S,[t("div",null,[e[15]||(e[15]=t("label",{class:"block text-sm font-medium text-primary-dark mb-2"},"Status",-1)),l(t("select",{"onUpdate:modelValue":e[4]||(e[4]=r=>o.value.status=r),class:"w-full border border-tertiary-dark rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-primary-light focus:border-primary-light"},e[14]||(e[14]=[t("option",{value:"pending"},"Pending",-1),t("option",{value:"completed"},"Completed",-1),t("option",{value:"overdue"},"Overdue",-1)]),512),[[c,o.value.status]])]),t("div",null,[e[16]||(e[16]=t("label",{class:"block text-sm font-medium text-primary-dark mb-2"},"Amount ($)",-1)),l(t("input",{"onUpdate:modelValue":e[5]||(e[5]=r=>o.value.amount=r),type:"number",min:"0",step:"0.01",class:"w-full border border-tertiary-dark rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-primary-light focus:border-primary-light",placeholder:"0.00"},null,512),[[m,o.value.amount]])])]),t("div",T,[e[17]||(e[17]=t("label",{class:"block text-sm font-medium text-primary-dark mb-2"},"Due Date",-1)),l(t("input",{"onUpdate:modelValue":e[6]||(e[6]=r=>o.value.due_date=r),type:"date",class:"w-full border border-tertiary-dark rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-primary-light focus:border-primary-light"},null,512),[[m,o.value.due_date]])]),t("div",{class:"flex justify-end space-x-3 pt-4 border-t border-tertiary-light"},[t("button",{type:"button",onClick:b,class:"px-4 py-2 border border-gray-300 rounded-lg shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-light"}," Cancel "),e[18]||(e[18]=t("button",{type:"submit",class:"px-4 py-2 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-primary hover:bg-primary-dark focus:outline-none focus:ring-2 focus:ring-primary-light"}," Create Job ",-1))])],32)])])])):k("",!0)}},N=C(O,[["__scopeId","data-v-97de25b7"]]);export{N as C};
