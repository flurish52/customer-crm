import{m as s,p as R,c as Y,o as i,w as B,a as c,j as d,k as x,b as t,d as m,e as O,h as q,l as G,f as p,t as l,H as F,n as j,z as _,E as K}from"./app-CAzgmfma.js";import{a as Q,_ as W}from"./AuthenticatedLayout-DgHnd84g.js";import{d as X}from"./dayjs.min-WXjqb0z8.js";import{C as Z}from"./CreateJob-BRpPkP0m.js";import{J as tt,a as et}from"./Jobs-C4mJdFBg.js";import{_ as ot}from"./PaymentModal-q3QLDdHV.js";import"./aos-Dbb6uvOV.js";import{_ as st}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./CreateInvoiceModal-DQb8XdU7.js";import"./CurrencyDollarIcon-Bc9gIuGZ.js";import"./CheckCircleIcon-Sn3100fl.js";import"./index-DKtf60Sy.js";const rt={class:""},lt={class:"bg-white rounded-xl shadow-sm border border-tertiary-light overflow-hidden mb-8"},at={class:"flex flex-col items-center pt-8"},it={class:"relative"},nt={key:0,class:"h-24 w-24 rounded-full bg-primary-light/10 flex items-center justify-center text-3xl font-bold text-primary-DEFAULT"},dt={key:1,class:"h-24 w-24 rounded-full overflow-hidden border-2 border-primary-light/20"},mt=["src"],ut={class:"text-2xl font-bold text-primary-dark mt-4"},ct={key:0,class:"text-primary-dark/80"},vt={class:"p-6 border-b border-tertiary-light"},xt={class:"flex flex-col md:flex-row gap-6 justify-center"},pt={key:0,class:"flex items-center"},gt={class:"text-primary-dark font-medium"},ht={key:1,class:"flex items-center"},bt={class:"text-primary-dark font-medium"},ft={key:2,class:"flex items-center"},wt={class:"text-primary-dark font-medium"},yt={class:"grid grid-cols-4 divide-x divide-tertiary-light"},kt={class:"p-4 text-center"},Ct={class:"text-xl font-bold text-primary-DEFAULT"},jt={class:"p-4 text-center"},Mt={class:"text-xl font-bold text-secondary"},Et={class:"p-4 text-center"},Jt={class:"text-xl font-bold text-primary-dark"},Tt={class:"p-4 text-center"},At={class:"text-xl font-bold text-primary-dark"},Bt={class:"p-6 border-t border-tertiary-light flex flex-col sm:flex-row gap-3 justify-center"},Ft={class:"bg-white rounded-xl shadow-sm border border-tertiary-light overflow-hidden"},_t={class:"px-6 py-4 border-b border-tertiary-light flex justify-between items-center"},Lt={class:"flex items-center space-x-2"},St={key:0,class:"divide-y divide-tertiary-light"},Dt={class:"hover:bg-tertiary-light/20 transition-colors"},Pt={key:1,class:"p-12 text-center"},$t={class:"mt-1 text-gray-500"},Ht={__name:"Customer",props:{customer:Object,totalSpent:Number},setup(o){let L=o,a=s(!1),h=s(!1);const v=s([]),b=s(!1),n=s("all"),f=s(!1),M=s(0),w=s(!1),y=s(!1),k=s({}),S=s({}),D=({payload:r,amountPaid:e})=>{M.value=e,f.value=!0,k.value=r,S.value=k.value.customer,a.value=!0},P=()=>{y.value=!0},$=()=>{y.value=!1},H=()=>{b.value=!0,w.value=!0},E=()=>{w.value=!1,b.value=!1},U=()=>{K.reload({preserveScroll:!0,preserveState:!0})};let z=()=>{f.value=!1,a.value=!a.value};s(0);let J=s();const V=({payload:r})=>{J.value=r,h.value=!0},T=()=>{h.value=!1};let N=({payload:r,jobId:e})=>{_.patch(`/job_update/status/${e}`,{type:"complete_job",satisfaction_score:r}).then(u=>{v.value=u.data.job,T(),alert(u.data.message)})},A=s([]);const I=r=>{_.get(`/get_jobs/${r}`).then(e=>{v.value=e.data,A.value=v.value.filter(u=>u.status!=="completed").length})};R(()=>{I(L.customer.id)});const C=r=>{n.value=r};return(r,e)=>(i(),Y(W,null,{default:B(()=>{var u;return[c(Z,{customer:o.customer,jobToEdit:k.value,onClose:m(z),showModal:m(a),amountPaid:M.value,onSubmit:U,isEditingJob:f.value},null,8,["customer","jobToEdit","onClose","showModal","amountPaid","isEditingJob"]),c(tt,{jobId:m(J),showModal:m(h),onSubmit:m(N),onClose:T},null,8,["jobId","showModal","onSubmit"]),c(ot,{jobs:v.value,onCancel:$,showPaymentModal:y.value},null,8,["jobs","showPaymentModal"]),w.value?(i(),d("div",{key:0,onClick:O(E,["self"]),class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"},[c(Q,{customerToEdit:o.customer,isEditing:b.value,onCloseAddCustomerModal:E},null,8,["customerToEdit","isEditing"])])):x("",!0),c(m(q),{title:"Customer"}),t("div",rt,[c(m(G),{href:"/dashboard",class:"flex items-center text-primary hover:text-primary-dark transition-colors"},{default:B(()=>e[5]||(e[5]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1),p(" Back ",-1)])),_:1,__:[5]}),t("div",lt,[t("div",at,[t("div",it,[o.customer.avatar?(i(),d("div",dt,[t("img",{src:`/storage/${o.customer.avatar}`,alt:"Customer avatar",class:"w-full h-full object-cover"},null,8,mt)])):(i(),d("div",nt,l(o.customer.initials),1)),e[6]||(e[6]=t("span",{class:"absolute bottom-2 right-2 h-3 w-3 rounded-full bg-green-500 border-2 border-white"},null,-1))]),t("h1",ut,l(o.customer.name),1),o.customer.company?(i(),d("p",ct,l(o.customer.company),1)):x("",!0)]),t("div",vt,[t("div",xt,[o.customer.email?(i(),d("div",pt,[e[8]||(e[8]=t("div",{class:"bg-primary-light/10 p-2 rounded-lg mr-3"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-primary-DEFAULT",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})])],-1)),t("div",null,[e[7]||(e[7]=t("p",{class:"text-xs text-gray-500"},"Email",-1)),t("p",gt,l(o.customer.email),1)])])):x("",!0),o.customer.phone?(i(),d("div",ht,[e[10]||(e[10]=t("div",{class:"bg-primary-light/10 p-2 rounded-lg mr-3"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-primary-DEFAULT",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})])],-1)),t("div",null,[e[9]||(e[9]=t("p",{class:"text-xs text-gray-500"},"Phone",-1)),t("p",bt,l(o.customer.phone),1)])])):x("",!0),o.customer.address?(i(),d("div",ft,[e[12]||(e[12]=t("div",{class:"bg-primary-light/10 p-2 rounded-lg mr-3"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-primary-DEFAULT",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})])],-1)),t("div",null,[e[11]||(e[11]=t("p",{class:"text-xs text-gray-500"},"Address",-1)),t("p",wt,l(o.customer.address),1)])])):x("",!0)])]),e[20]||(e[20]=t("div",{class:"hidden md:block h-0.5 w-full bg-tertiary-dark/30 my-2"},null,-1)),t("div",yt,[t("div",kt,[e[13]||(e[13]=t("p",{class:"text-sm text-gray-500"},"Total Jobs",-1)),t("p",Ct,l((u=v.value)==null?void 0:u.length),1)]),t("div",jt,[e[14]||(e[14]=t("p",{class:"text-sm text-gray-500"},"Active Jobs",-1)),t("p",Mt,l(m(A)),1)]),t("div",Et,[e[15]||(e[15]=t("p",{class:"text-sm text-gray-500"},"Total Spent",-1)),t("p",Jt,"â‚¦ "+l(o.totalSpent),1)]),t("div",Tt,[e[16]||(e[16]=t("p",{class:"text-sm text-gray-500"},"Since",-1)),t("p",At,l(m(X)(o.customer.created_at).format("MMM D, YYYY")),1)])]),t("div",Bt,[t("button",{onClick:e[0]||(e[0]=g=>F(a)?a.value=!0:a=!0),class:"px-6 py-3 bg-primary text-white rounded-lg hover:bg-primary-dark transition-colors flex items-center justify-center"},e[17]||(e[17]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),p(" Create Job ",-1)])),t("button",{onClick:H,class:"px-6 py-3 border border-primary-DEFAULT text-primary-DEFAULT rounded-lg hover:bg-primary-light/10 transition-colors flex items-center justify-center"},e[18]||(e[18]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1),p(" Edit Profile ",-1)])),t("button",{onClick:P,class:"px-6 py-3 bg-primary text-white rounded-lg hover:bg-primary-dark transition-colors flex items-center justify-center"},e[19]||(e[19]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),p(" Made payment ",-1)]))])]),t("div",Ft,[t("div",_t,[e[21]||(e[21]=t("h2",{class:"text-xl font-bold text-primary-dark"},"Job History",-1)),t("div",Lt,[t("button",{onClick:e[1]||(e[1]=g=>C("all")),class:j(["px-3 py-1 text-sm rounded-md",{"bg-primary-DEFAULT text-white":n.value==="all","text-primary-dark hover:bg-tertiary-light":n.value!=="all"}])}," All ",2),t("button",{onClick:e[2]||(e[2]=g=>C("active")),class:j(["px-3 py-1 text-sm rounded-md",{"bg-secondary-light text-secondary-dark":n.value==="active","text-primary-dark hover:bg-tertiary-light":n.value!=="active"}])}," Active ",2),t("button",{onClick:e[3]||(e[3]=g=>C("completed")),class:j(["px-3 py-1 text-sm rounded-md",{"bg-green-100 text-green-800":n.value==="completed","text-primary-dark hover:bg-tertiary-light":n.value!=="completed"}])}," Completed ",2)])]),v.value.length>0?(i(),d("div",St,[t("div",Dt,[c(et,{jobs:o.customer.jobs||{},onIsEditing:D,onShowModal:r.showModalComponent,onCompleteJob:V,class:""},null,8,["jobs","onShowModal"])])])):(i(),d("div",Pt,[e[23]||(e[23]=t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-12 w-12 mx-auto text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})],-1)),e[24]||(e[24]=t("h3",{class:"mt-2 text-lg font-medium text-primary-dark"},"No jobs found",-1)),t("p",$t,"This customer doesn't have any "+l(n.value==="all"?"":n.value)+" jobs yet",1),t("button",{onClick:e[4]||(e[4]=g=>F(a)?a.value=!0:a=!0),class:"mt-4 px-4 py-2 bg-secondary-DEFAULT text-white rounded-lg hover:bg-secondary-dark transition-colors flex items-center mx-auto"},e[22]||(e[22]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),p(" Create New Job ",-1)]))]))])])]}),_:1}))}},Wt=st(Ht,[["__scopeId","data-v-c49ed90f"]]);export{Wt as default};
