import{_ as w}from"./AuthenticatedLayout-CD8uY5zI.js";import k from"./InvoiceFooter-DUZeVDhh.js";import{_ as N}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{g as y,c as C,o,w as D,b as t,j as n,k as i,t as s,n as g,f as b,F as j,q as I,a as S}from"./app-VKdpvpg5.js";const E={ref:"invoiceContainer",id:"invoiceContainer",class:"max-w-5xl mx-auto p-8 bg-white text-gray-800 shadow-lg rounded-lg"},V={class:"flex justify-between items-start mb-8 pb-6 border-b-2 border-gray-200"},A={class:"flex items-start"},O={key:0,class:"mr-4"},P=["src","alt"],T={class:"text-2xl font-bold text-primary mb-2"},B={class:"text-gray-500 mb-1"},L={class:"text-gray-500"},U={key:0},$={key:1},J={key:2},G={class:"text-right"},q={class:"space-y-1"},F={id:"billToAndJob",class:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-8"},R={class:"space-y-1"},H={class:"font-bold"},M={key:0},Q={key:1},z={key:2},W={key:0},K={class:"space-y-2"},X={key:0,class:"font-semibold"},Y={key:1},Z={key:2},tt={key:0},et={key:1},st={key:3},ot={id:"invoiceItems",class:"mb-8"},nt={class:"border border-gray-200 rounded overflow-hidden"},it={class:"font-bold"},lt={key:0,class:"text-gray-500 text-sm mt-1"},at={class:"mb-8 flex justify-end"},dt={class:"w-full md:w-72 space-y-2"},rt={class:"flex justify-between font-bold"},ut={key:0,class:"flex justify-between"},ct={key:1,class:"flex justify-between"},vt={class:"flex justify-between border-t-2 border-gray-200 pt-2 font-bold text-lg"},mt={class:"flex flex-col items-center justify-center"},pt={class:"pt-8 border-t-2 border-gray-200 text-center"},bt={key:0,class:"mb-6 text-center"},yt={class:"text-gray-500 text-sm italic leading-relaxed"},xt={class:"w-full flex items-center justify-center py-2 m-1"},ft={__name:"View",props:{invoice:Object},setup(l){const m=l,r=y(()=>JSON.parse(m.invoice.business_snapshot)),c=y(()=>JSON.parse(m.invoice.customer_snapshot)),a=y(()=>JSON.parse(m.invoice.job_snapshot)),v=u=>new Intl.NumberFormat("en-NG",{style:"currency",currency:m.invoice.currency||"NGN"}).format(Number(u)),p=u=>u?new Date(u).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"}):"—",x=u=>({PAID:"bg-green-600 text-white px-2 py-0.5 rounded",PENDING:"bg-yellow-500 text-white px-2 py-0.5 rounded",OVERDUE:"bg-red-600 text-white px-2 py-0.5 rounded",CANCELLED:"bg-gray-500 text-white px-2 py-0.5 rounded",IN_PROGRESS:"bg-yellow-400 text-white px-2 py-0.5 rounded"})[u.toUpperCase()]||"bg-gray-400 text-white px-2 py-0.5 rounded",h=({invoiceContainer:u})=>{const e=document.getElementById("invoiceContainer");if(console.log(e),!e)return;const d=window.open("","","width=800,height=600"),f=Array.from(document.querySelectorAll('link[rel="stylesheet"], style')).map(_=>_.outerHTML).join("");d.document.write(`
        <html>
        <head>
            <title>Print Invoice</title>
        ${f}
        </head>
        <body>
            ${e.innerHTML}
        </body>
        </html>
    `),d.document.close(),d.focus(),d.print(),d.close()};return(u,e)=>(o(),C(w,null,{default:D(()=>[t("div",E,[t("header",V,[t("div",A,[r.value.logo?(o(),n("div",O,[t("img",{src:`/storage/${r.value.logo}`,alt:`${r.value.name} logo`,class:"w-20 h-20 object-contain"},null,8,P)])):i("",!0),t("div",null,[t("h1",T,s(r.value.name),1),t("p",B,s(r.value.address),1),t("p",L,[r.value.phone?(o(),n("span",U,s(r.value.phone),1)):i("",!0),r.value.phone&&r.value.email?(o(),n("span",$," • ")):i("",!0),r.value.email?(o(),n("span",J,s(r.value.email),1)):i("",!0)])])]),t("div",G,[e[4]||(e[4]=t("h2",{class:"text-xl font-semibold mb-4"},"INVOICE",-1)),t("div",q,[t("div",null,[e[0]||(e[0]=t("span",{class:"font-bold mr-2"},"Invoice #:",-1)),t("span",null,s(l.invoice.invoice_number),1)]),t("div",null,[e[1]||(e[1]=t("span",{class:"font-bold mr-2"},"Date:",-1)),t("span",null,s(p(l.invoice.issue_date)),1)]),t("div",null,[e[2]||(e[2]=t("span",{class:"font-bold mr-2"},"Due Date:",-1)),t("span",null,s(p(l.invoice.due_date)),1)]),t("div",null,[e[3]||(e[3]=t("span",{class:"font-bold mr-2"},"Status:",-1)),t("span",{class:g(x(l.invoice.status))},s(l.invoice.status.toUpperCase()),3)])])])]),t("section",F,[t("div",null,[e[5]||(e[5]=t("h3",{class:"text-blue-600 text-lg mb-4 border-b border-gray-200 pb-2"},"Bill To",-1)),t("div",R,[t("p",H,s(c.value.name),1),c.value.company?(o(),n("p",M,s(c.value.company),1)):i("",!0),c.value.phone?(o(),n("p",Q,s(c.value.phone),1)):i("",!0),c.value.email?(o(),n("p",z,s(c.value.email),1)):i("",!0)])]),a.value?(o(),n("div",W,[e[7]||(e[7]=t("h3",{class:"text-blue-600 text-lg mb-4 border-b border-gray-200 pb-2"},"Job Details",-1)),t("div",K,[a.value.title?(o(),n("p",X,s(a.value.title),1)):i("",!0),a.value.description?(o(),n("p",Y,s(a.value.description),1)):i("",!0),a.value.start_date||a.value.due_date?(o(),n("div",Z,[a.value.start_date?(o(),n("span",tt,s(p(a.value.start_date)),1)):i("",!0),a.value.due_date?(o(),n("span",et," - "+s(p(a.value.due_date)),1)):i("",!0)])):i("",!0),a.value.status?(o(),n("p",st,[e[6]||(e[6]=b(" Status: ",-1)),t("span",{class:g(x(a.value.status))},s(a.value.status.toUpperCase()),3)])):i("",!0)])])):i("",!0)]),t("section",ot,[e[12]||(e[12]=t("h3",{class:"text-blue-600 text-lg mb-4 border-b border-gray-200 pb-2"},"Invoice Items",-1)),t("div",nt,[e[11]||(e[11]=t("div",{class:"grid grid-cols-4 bg-primary-dark text-white font-bold p-4"},[t("div",null,"Description"),t("div",null,"Qty"),t("div",null,"Unit Price"),t("div",null,"Amount")],-1)),(o(!0),n(j,null,I(l.invoice.items,(d,f)=>(o(),n("div",{key:d.id,id:"invoiceItemsDetails",class:"grid grid-cols-4 gap-2 md:gap-0 p-4 border-b border-gray-200 items-center last:border-b-0"},[t("div",null,[t("div",it,s(d.name),1),d.description?(o(),n("div",lt,s(d.description),1)):i("",!0)]),t("div",null,[e[8]||(e[8]=t("span",{class:"font-bold md:hidden print:hidden"},"Quantity: ",-1)),b(s(d.quantity),1)]),t("div",null,[e[9]||(e[9]=t("span",{class:"font-bold md:hidden print:hidden"},"Unit Price: ",-1)),b(s(v(d.unit_price)),1)]),t("div",null,[e[10]||(e[10]=t("span",{class:"font-bold md:hidden print:hidden"},"Amount: ",-1)),b(s(v(d.total)),1)])]))),128))])]),t("section",at,[t("div",dt,[t("div",rt,[e[13]||(e[13]=t("span",null,"Subtotal",-1)),t("span",null,s(v(l.invoice.subtotal)),1)]),l.invoice.tax>0?(o(),n("div",ut,[e[14]||(e[14]=t("span",null,"Tax",-1)),t("span",null,s(v(l.invoice.tax)),1)])):i("",!0),l.invoice.discount>0?(o(),n("div",ct,[e[15]||(e[15]=t("span",null,"Discount",-1)),t("span",null,"-"+s(v(l.invoice.discount)),1)])):i("",!0),t("div",vt,[e[16]||(e[16]=t("span",null,"Total",-1)),t("span",null,s(v(l.invoice.total)),1)])])]),t("div",mt,[t("footer",pt,[l.invoice.notes?(o(),n("div",bt,[e[17]||(e[17]=t("h4",{class:"mb-2 font-semibold text-gray-800"},"Notes",-1)),t("p",yt,s(l.invoice.notes),1)])):i("",!0)])])],512),t("div",xt,[S(k,{onPrint:h})])]),_:1}))}},kt=N(ft,[["__scopeId","data-v-9a38222d"]]);export{kt as default};
