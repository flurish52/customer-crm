import{_ as S}from"./AuthenticatedLayout-CD8uY5zI.js";import{d as C}from"./dayjs.min-RKMcYrVi.js";import{m as b,j as c,o as i,b as t,f as v,t as a,d as g,k as _,e as B,i as D,C as P,D as V,E as j,G as z,c as N,w as F,a as f,H,F as I,q as $,n as k}from"./app-VKdpvpg5.js";import{_ as M}from"./_plugin-vue_export-helper-DlAUqK2U.js";const L={class:"bg-primary text-primary-dark px-6 rounded-xl shadow-md text-sm"},U={class:"grid grid-cols-2 md:grid-cols-4 gap-4 border-b-2 border-t-2 mb-3 border-primary"},O={class:"bg-white/20 backdrop-blur-sm rounded-lg p-4 text-center"},A={class:"text-xl font-bold"},E={class:"bg-white/20 backdrop-blur-sm rounded-lg p-4 text-center"},T={class:"text-xl font-bold"},J={class:"bg-white/20 backdrop-blur-sm rounded-lg p-4 text-center"},q={class:"text-xl font-bold"},G={class:"bg-white/20 backdrop-blur-sm rounded-lg p-4 text-center"},R={class:"text-xl font-bold"},K={__name:"InvoiceIndexHeader",props:{invoices:Array},setup(n){const r=n,u=r.invoices.length,d=r.invoices.reduce((s,e)=>s+Number(e.total||0),0),l=r.invoices.filter(s=>s.due_date&&C(s.due_date).isBefore(C(),"day")).length,p=b(82);function m(){alert("Filter invoices")}function x(){alert("Export invoices")}return(s,e)=>(i(),c("section",L,[t("div",{class:"flex flex-col md:flex-row md:justify-between md:items-center gap-4"},[e[2]||(e[2]=t("div",null,[t("h1",{class:"text-xl font-bold"},"Invoices"),t("p",{class:"text-sm text-secondary mt-1"},"Manage all your invoices, track payments, and monitor statuses")],-1)),t("div",{class:"flex flex-wrap gap-3 text-primary-dark"},[t("button",{onClick:m,class:"flex items-center gap-2 border-2 hover:bg-secondary border-primary px-4 py-2 rounded-lg font-semibold transition"},e[0]||(e[0]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2a1 1 0 01-.293.707L15 12v6a1 1 0 01-1.447.894l-4-2A1 1 0 019 16v-4L3.293 6.707A1 1 0 013 6V4z"})],-1),v(" Filter ",-1)])),t("button",{onClick:x,class:"border-2 hover:bg-secondary border-primary flex items-center gap-2 text-primary-dark px-4 py-2 rounded-lg font-semibold transition"},e[1]||(e[1]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v2a2 2 0 002 2h12a2 2 0 002-2v-2M12 12v8m0-8l-4-4m4 4l4-4"})],-1),v(" Export ",-1)]))])]),t("div",U,[t("div",O,[t("div",A,a(g(u)),1),e[3]||(e[3]=t("div",{class:"text-sm opacity-90"},"Total Invoices",-1))]),t("div",E,[t("div",T,a(g(d)),1),e[4]||(e[4]=t("div",{class:"text-sm opacity-90"},"Outstanding Balance",-1))]),t("div",J,[t("div",q,a(g(l)),1),e[5]||(e[5]=t("div",{class:"text-sm opacity-90"},"Overdue Invoices",-1))]),t("div",G,[t("div",R,a(p.value)+"%",1),e[6]||(e[6]=t("div",{class:"text-sm opacity-90"},"Paid Invoices",-1))])])]))}},Q={class:"bg-white rounded-lg shadow-lg w-full max-w-md p-6"},W={class:"text-xl font-semibold text-gray-800 mb-2"},X={class:"text-primary"},Y={class:"ml-4 px-2 py-1 text-sm font-medium text-primary-dark rounded-full"},Z={__name:"UpdateInvoiceStatus",props:{showModal:Boolean,invoice:Object},emits:["cancel"],setup(n,{emit:r}){const u=n,d=b(""),l=b(""),p=r,m=()=>{d.value="",p("cancel")},x=()=>{d.value&&axios.patch(`/update_invoice/status/${u.invoice.id}`,{selectedStatus:d.value}).then(s=>{s.status===200&&(l.value=s.data.message,j.visit("/dashboard/invoices"))})};return(s,e)=>(i(),c("div",null,[n.showModal?(i(),c("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:B(m,["self"])},[t("div",Q,[e[3]||(e[3]=t("h2",{class:"text-lg font-semibold mb-4"},"Update Invoice Status",-1)),v(" "+a(l.value)+"werwe ",1),t("h1",W,[t("span",X,"Invoice #"+a(n.invoice.invoice_number),1),t("div",null,[e[1]||(e[1]=t("span",null,"Status:",-1)),t("span",Y,a(n.invoice.status.toUpperCase()),1)])]),D(t("select",{"onUpdate:modelValue":e[0]||(e[0]=y=>d.value=y),class:"w-full border rounded px-3 py-2 mb-4"},e[2]||(e[2]=[V('<option value="" disabled data-v-49d9b37a>Select status</option><option value="paid" data-v-49d9b37a>Paid</option><option value="pending" data-v-49d9b37a>Pending</option><option value="cancelled" data-v-49d9b37a>Cancelled</option><option value="overdue" data-v-49d9b37a>Overdue</option>',5)]),512),[[P,d.value]]),t("div",{class:"flex justify-end gap-3"},[t("button",{onClick:m,class:"px-4 py-2 rounded bg-gray-200 hover:bg-gray-300"}," Cancel "),t("button",{onClick:x,class:"px-4 py-2 rounded bg-primary text-white hover:bg-primary-dark"}," Submit ")])])])):_("",!0)]))}},tt=M(Z,[["__scopeId","data-v-49d9b37a"]]),et={class:"hidden md:block overflow-x-auto rounded-lg shadow"},st={class:"w-full border-collapse bg-white text-left text-sm border-b-2 border-gray-900"},ot={class:"divide-y divide-gray-100"},at={class:"px-6 py-4 font-medium text-gray-900"},nt={class:"px-6 py-4 font-medium text-gray-900"},rt={class:"px-6 py-4"},dt={class:"px-6 py-4"},it={class:"px-6 py-4 font-medium"},lt={class:"px-6 py-4"},ct={class:"px-6 py-4"},ut={class:"px-6 py-4"},pt={class:"flex justify-center space-x-2"},mt=["onClick"],xt=["onClick"],vt={class:"mt-4 flex justify-end"},gt={class:"block md:hidden space-y-4"},bt={class:"p-4 border-b border-gray-100 bg-gray-50"},yt={class:"flex justify-between items-start"},ht={class:"font-semibold text-lg text-primary"},ft={class:"text-sm text-gray-500 mt-1"},wt={class:"p-4"},kt={class:"grid grid-cols-2 gap-4 mb-4"},_t={class:"font-medium"},Ct={class:"font-medium"},It={class:"flex justify-between pt-3 border-t border-gray-100"},$t=["onClick"],jt=["onClick"],Mt=["onClick"],St={class:"mt-4 flex justify-center"},Bt={__name:"Index",props:{invoices:Array},setup(n){let r=b(!1);const u=s=>({paid:"bg-green-100 text-green-800",pending:"bg-yellow-100 text-yellow-800",overdue:"bg-red-100 text-red-800",draft:"bg-gray-100 text-gray-800"})[s.toLowerCase()]||"bg-gray-100 text-gray-800",d=s=>{if(!s)return"-";const e={year:"numeric",month:"short",day:"numeric"};return new Date(s).toLocaleDateString(void 0,e)},l=s=>{j.visit(`/dashboard/invoice/${s.id}`)};let p=b();const m=s=>{console.log("Download PDF for invoice:",s.id)},x=s=>{p.value=s,r.value=!0,console.log(s)};return(s,e)=>{const y=z("Pagination");return i(),N(S,null,{default:F(()=>[f(K,{invoices:n.invoices.data},null,8,["invoices"]),f(tt,{invoice:g(p),showModal:g(r),onCancel:e[0]||(e[0]=o=>H(r)?r.value=!1:r=!1)},null,8,["invoice","showModal"]),t("div",et,[t("table",st,[e[3]||(e[3]=t("thead",{class:"bg-primary border-b-2 border-gray-600"},[t("tr",null,[t("th",{class:"px-6 py-4 font-semibold text-primary-dark"},"S/N"),t("th",{class:"px-6 py-4 font-semibold text-primary-dark"},"Invoice #"),t("th",{class:"px-6 py-4 font-semibold text-primary-dark"},"Customer"),t("th",{class:"px-6 py-4 font-semibold text-primary-dark"},"Status"),t("th",{class:"px-6 py-4 font-semibold text-primary-dark"},"Total"),t("th",{class:"px-6 py-4 font-semibold text-primary-dark"},"Issue Date"),t("th",{class:"px-6 py-4 font-semibold text-primary-dark"},"Due Date"),t("th",{class:"px-6 py-4 font-semibold text-primary-dark text-center"},"Actions")]),t("hr")],-1)),t("tbody",ot,[n.invoices.data.length?(i(!0),c(I,{key:0},$(n.invoices.data,(o,w)=>(i(),c("tr",{key:o.id,class:k([w%2===0?"text-black":"bg-gray-100 text-black","hover:bg-gray-50 transition-colors"])},[t("td",at,a(w+1),1),t("td",nt,a(o.invoice_number),1),t("td",rt,a(JSON.parse(o.customer_snapshot).name),1),t("td",dt,[t("span",{class:k([u(o.status),"px-3 py-1 text-xs font-medium rounded-full"])},a(o.status),3)]),t("td",it,a(o.total)+" "+a(o.currency),1),t("td",lt,a(d(o.issue_date)),1),t("td",ct,a(d(o.due_date)),1),t("td",ut,[t("div",pt,[t("button",{onClick:h=>l(o),class:"text-secondary hover:text-secondary-dark p-1 rounded transition-colors",title:"View Invoice"},e[1]||(e[1]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1)]),8,mt),t("button",{onClick:h=>x(o),class:"text-gray-600 hover:text-gray-800 p-1 rounded transition-colors",title:"Update Status"},e[2]||(e[2]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)]),8,xt)])])],2))),128)):_("",!0)])]),t("div",vt,[f(y,{meta:n.invoices.meta,onPageChanged:s.fetchInvoices},null,8,["meta","onPageChanged"])])]),t("div",gt,[n.invoices.data.length?(i(!0),c(I,{key:0},$(n.invoices.data,(o,w)=>(i(),c("div",{key:o.id,class:"bg-white rounded-xl shadow-md overflow-hidden border border-gray-100"},[t("div",bt,[t("div",yt,[t("h3",ht,a(o.invoice_number),1),t("span",{class:k([u(o.status),"px-3 py-1 text-xs font-medium rounded-full"])},a(o.status),3)]),t("p",ft,a(d(o.issue_date)),1)]),t("div",wt,[t("div",kt,[t("div",null,[e[4]||(e[4]=t("p",{class:"text-xs text-gray-500 uppercase tracking-wide"},"Customer",-1)),t("p",_t,a(JSON.parse(o.customer_snapshot).name),1)]),t("div",null,[e[5]||(e[5]=t("p",{class:"text-xs text-gray-500 uppercase tracking-wide"},"Total",-1)),t("p",Ct,a(o.total)+" "+a(o.currency),1)])]),t("div",It,[t("button",{onClick:h=>l(o),class:"flex items-center text-secondary font-medium text-sm py-2 px-3 rounded-lg hover:bg-secondary hover:text-white transition-colors"},e[6]||(e[6]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1),v(" View ",-1)]),8,$t),t("button",{onClick:h=>m(o),class:"flex items-center text-tertiary font-medium text-sm py-2 px-3 rounded-lg hover:bg-tertiary hover:text-white transition-colors"},e[7]||(e[7]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),v(" PDF ",-1)]),8,jt),t("button",{onClick:h=>x(o),class:"flex items-center text-gray-600 font-medium text-sm py-2 px-3 rounded-lg hover:bg-gray-200 transition-colors"},e[8]||(e[8]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1),v(" Status ",-1)]),8,Mt)])])]))),128)):_("",!0),t("div",St,[f(y,{meta:n.invoices.meta,onPageChanged:s.fetchInvoices},null,8,["meta","onPageChanged"])])])]),_:1})}}},Nt=M(Bt,[["__scopeId","data-v-a4897f1d"]]);export{Nt as default};
