import{_ as D}from"./AuthenticatedLayout-9PPnsSbA.js";import B from"./InvoiceFooter-DW7Fz6jq.js";import{m as x,j as l,o as i,b as e,k as r,f as m,e as O,i as f,v as U,n as $,t as o,I as C,J as N,d as k,H as I,g as E,z as T,E as J,c as L,w as P,a as M,h as z,F as H,q as R}from"./app-BijfT9Au.js";import{_ as A}from"./_plugin-vue_export-helper-DlAUqK2U.js";const q={class:"bg-white rounded-xl shadow-2xl w-full max-w-lg max-h-[90vh] overflow-hidden flex flex-col"},F={class:"overflow-y-auto flex-1 px-6"},G={class:"py-5 border-b border-gray-100"},W={class:"flex items-center space-x-3 cursor-pointer"},Q={class:"relative inline-block w-12 h-6 rounded-full bg-gray-300"},K={class:"text-gray-700"},X={class:"text-indigo-600 font-semibold ml-1"},Y={class:"py-5 border-b border-gray-100"},Z={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ee=["disabled"],te={class:"py-1 border-b border-gray-100"},se={class:"space-y-3 bg-gray-50 p-2 rounded-lg border border-gray-100"},oe={class:"flex items-center space-x-3 p-1 rounded-md hover:bg-white transition-colors duration-150 cursor-pointer"},ne={class:"text-gray-700"},ie={class:"text-indigo-600 font-medium"},le={class:"flex items-center space-x-3 p-1 rounded-md hover:bg-white transition-colors duration-150 cursor-pointer"},ae={class:"text-gray-700"},re={class:"text-indigo-600 font-medium"},de={class:"flex items-center space-x-3 p-1 rounded-md hover:bg-white transition-colors duration-150 cursor-pointer"},ue={class:"text-gray-700"},ce={class:"text-indigo-600 font-medium"},me={class:"py-5"},pe={class:"mb-4"},ve={class:"w-full"},ge={class:"text-center text-red-600 text-xs p-1"},be={__name:"SendInvoiceModal",props:{invoice:Object,personalEmail:String,businessEmail:String},setup(n){const v=n,u=x(!1),p=x(!1),d=x(""),b=x(""),y=x(""),h=x("");let _=x(JSON.parse(v.invoice.business_snapshot).email),g=x(""),t=x("");const c=()=>{u.value=!0},w=()=>{u.value=!1,h.value="",t.value="",g.value="",b.value=""},j=async()=>{var a;const S=E(()=>t.value==="business"?v.businessEmail:t.value==="personal"?v.personalEmail:t.value==="receipt"?_.value:null),s=p.value?JSON.parse(v.invoice.business_snapshot).email:h.value;if(!s){alert("Please provide a client email.");return}try{await T.post(`/invoice/${v.invoice.id}/send`,{replyToEmail:S.value,email:s,from_name:d.value||JSON.parse(v.invoice.business_snapshot).name,subject:b.value||`Invoice #${v.invoice.id}`,message:y.value}),alert("Email sent successfully"),w(),J.visit(`/dashboard/invoice/${v.invoice.id}`)}catch(V){g.value=((a=V.response)==null?void 0:a.data.message)||V.message,alert("Failed to send email,")}};return(S,s)=>(i(),l("div",null,[e("button",{onClick:c,class:"bg-indigo-600 text-white px-5 py-2.5 rounded-lg hover:bg-indigo-700 transition-all duration-200 flex items-center gap-2 shadow-md hover:shadow-lg"},s[8]||(s[8]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 12H8m0 0H6a2 2 0 00-2 2v4a2 2 0 002 2h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2"})],-1),m(" Share via Email ",-1)])),u.value?(i(),l("div",{key:0,onClick:O(w,["self"]),class:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50 p-4 backdrop-blur-sm"},[e("div",q,[e("div",{class:"flex items-center justify-between p-6 border-b border-gray-200"},[s[10]||(s[10]=e("h2",{class:"text-2xl font-semibold text-gray-800"},"Send Invoice",-1)),e("button",{onClick:w,class:"text-gray-400 hover:text-gray-600 transition-colors"},s[9]||(s[9]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),e("div",F,[e("div",G,[s[12]||(s[12]=e("h3",{class:"text-lg font-medium text-gray-800 mb-3 flex items-center gap-2"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-indigo-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})]),m(" Client Email ")],-1)),e("label",W,[e("div",Q,[f(e("input",{type:"checkbox","onUpdate:modelValue":s[0]||(s[0]=a=>p.value=a),class:"absolute w-0 h-0 opacity-0"},null,512),[[U,p.value]]),e("span",{class:$(["toggle-label absolute cursor-pointer top-0 left-0 right-0 bottom-0 rounded-full transition duration-200",{"bg-indigo-100":p.value}])},null,2),e("span",{class:$(["absolute bg-white border border-gray-300 rounded-full h-5 w-5 top-0.5 transition-all duration-200 transform",{"translate-x-6 bg-indigo-500":p.value}])},null,2)]),e("span",K,[s[11]||(s[11]=m("Use Client email ",-1)),e("span",X,o(JSON.parse(n.invoice.business_snapshot).email),1)])])]),e("div",Y,[s[15]||(s[15]=e("h3",{class:"text-lg font-medium text-gray-800 mb-4 flex items-center gap-2"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-indigo-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})]),m(" Recipient Information ")],-1)),e("div",Z,[e("div",null,[s[13]||(s[13]=e("label",{class:"block mb-2 text-sm font-medium text-gray-700"},"Recipient Email",-1)),f(e("input",{type:"email",class:"w-full border border-gray-300 rounded-lg px-4 py-2.5 focus:ring-2 focus:ring-indigo-200 focus:border-indigo-500 transition-colors duration-200",disabled:p.value,"onUpdate:modelValue":s[1]||(s[1]=a=>h.value=a),placeholder:"Enter email address"},null,8,ee),[[C,h.value]])]),e("div",null,[s[14]||(s[14]=e("label",{class:"block mb-2 text-sm font-medium text-gray-700"},"From Name",-1)),f(e("input",{type:"text",class:"w-full border border-gray-300 rounded-lg px-4 py-2.5 focus:ring-2 focus:ring-indigo-200 focus:border-indigo-500 transition-colors duration-200","onUpdate:modelValue":s[2]||(s[2]=a=>d.value=a),placeholder:"e.g. Business name",required:""},null,512),[[C,d.value]])])])]),e("div",te,[s[19]||(s[19]=e("h3",{class:"text-lg font-medium text-gray-800 mb-3 flex items-center gap-2"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-indigo-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6"})]),m(" Reply-To Email ")],-1)),s[20]||(s[20]=e("p",{class:"px-4 text-red-600 text-xs italic"},"Where do you want your client to reply to??",-1)),e("div",se,[e("label",oe,[f(e("input",{type:"radio",value:"business","onUpdate:modelValue":s[3]||(s[3]=a=>I(t)?t.value=a:t=a),class:"text-indigo-600 focus:ring-indigo-500 h-4 w-4"},null,512),[[N,k(t)]]),e("span",ne,[s[16]||(s[16]=m("Business email ",-1)),e("span",ie,"("+o(n.businessEmail)+")",1)])]),e("label",le,[f(e("input",{type:"radio",value:"personal","onUpdate:modelValue":s[4]||(s[4]=a=>I(t)?t.value=a:t=a),class:"text-indigo-600 focus:ring-indigo-500 h-4 w-4"},null,512),[[N,k(t)]]),e("span",ae,[s[17]||(s[17]=m("Personal email ",-1)),e("span",re,"("+o(n.personalEmail)+")",1)])]),e("label",de,[f(e("input",{type:"radio",value:"receipt","onUpdate:modelValue":s[5]||(s[5]=a=>I(t)?t.value=a:t=a),class:"text-indigo-600 focus:ring-indigo-500 h-4 w-4"},null,512),[[N,k(t)]]),e("span",ue,[s[18]||(s[18]=m("Email on invoice ",-1)),e("span",ce,"("+o(k(_))+")",1)])])])]),e("div",me,[s[23]||(s[23]=e("h3",{class:"text-lg font-medium text-gray-800 mb-4 flex items-center gap-2"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-indigo-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})]),m(" Message Content ")],-1)),e("div",pe,[s[21]||(s[21]=e("label",{class:"block mb-2 text-sm font-medium text-gray-700"},"Subject",-1)),f(e("input",{type:"text",class:"w-full border border-gray-300 rounded-lg px-4 py-2.5 focus:ring-2 focus:ring-indigo-200 focus:border-indigo-500 transition-colors duration-200","onUpdate:modelValue":s[6]||(s[6]=a=>b.value=a),placeholder:"Enter email subject",required:""},null,512),[[C,b.value]])]),e("div",null,[s[22]||(s[22]=e("label",{class:"block mb-2 text-sm font-medium text-gray-700"},[m("Message "),e("span",{class:"text-gray-500 font-normal"},"(optional)")],-1)),f(e("textarea",{class:"w-full border border-gray-300 rounded-lg px-4 py-2.5 focus:ring-2 focus:ring-indigo-200 focus:border-indigo-500 transition-colors duration-200",rows:"3","onUpdate:modelValue":s[7]||(s[7]=a=>y.value=a),placeholder:"Write a message"},null,512),[[C,y.value]])])])]),e("div",ve,[e("p",ge,o(k(g)),1),e("div",{class:"flex justify-end space-x-3 p-6 border-t border-gray-200 bg-gray-50"},[e("button",{onClick:w,class:"px-5 py-2.5 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors duration-200 font-medium"}," Cancel "),e("button",{onClick:j,class:"bg-indigo-600 text-white px-5 py-2.5 rounded-lg hover:bg-indigo-700 transition-all duration-200 font-medium shadow-md hover:shadow-lg flex items-center gap-2"},s[24]||(s[24]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})],-1),m(" Send Invoice ",-1)]))])])])])):r("",!0)]))}},xe={ref:"invoiceContainer",id:"invoiceContainer",class:"max-w-5xl mx-auto p-8 bg-white text-gray-800 shadow-lg rounded-lg"},ye={class:"flex justify-between items-start mb-8 pb-6 border-b-2 border-gray-200"},fe={class:"flex items-start"},he={key:0,class:"mr-4"},we=["src","alt"],ke={class:"text-2xl font-bold text-primary mb-2"},_e={class:"text-gray-500 mb-1"},Ce={class:"text-gray-500"},Ee={key:0},$e={key:1},je={key:2},Ne={class:"text-right"},Ie={class:"space-y-1"},Me={id:"billToAndJob",class:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-8"},Se={class:"space-y-1"},Ve={class:"font-bold"},De={key:0},Be={key:1},Oe={key:2},Ue={key:0},Te={class:"space-y-2"},Je={key:0,class:"font-semibold"},Le={key:1},Pe={key:2},ze={key:0},He={key:1},Re={key:3},Ae={id:"invoiceItems",class:"mb-8"},qe={class:"border border-gray-200 rounded overflow-hidden"},Fe={class:"font-bold"},Ge={key:0,class:"text-gray-500 text-sm mt-1"},We={class:"mb-8 flex justify-end"},Qe={class:"w-full md:w-72 space-y-2"},Ke={class:"flex justify-between font-bold"},Xe={key:0,class:"flex justify-between"},Ye={key:1,class:"flex justify-between"},Ze={class:"flex justify-between border-t-2 border-gray-200 pt-2 font-bold text-lg"},et={class:"flex flex-col items-center justify-center"},tt={class:"pt-8 border-t-2 border-gray-200 text-center"},st={key:0,class:"mb-6 text-center"},ot={class:"text-gray-500 text-sm italic leading-relaxed"},nt={class:"w-full flex items-center justify-center gap-4 py-2 m-1"},it={__name:"View",props:{invoice:Object,user:Object},setup(n){const v=n,u=E(()=>JSON.parse(v.invoice.business_snapshot)),p=E(()=>JSON.parse(v.invoice.customer_snapshot)),d=E(()=>JSON.parse(v.invoice.job_snapshot)),b=g=>new Intl.NumberFormat("en-NG",{style:"currency",currency:v.invoice.currency||"NGN"}).format(Number(g)),y=g=>g?new Date(g).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"}):"—",h=g=>({PAID:"bg-green-600 text-white px-2 py-0.5 rounded",PENDING:"bg-yellow-500 text-white px-2 py-0.5 rounded",OVERDUE:"bg-red-600 text-white px-2 py-0.5 rounded",CANCELLED:"bg-gray-500 text-white px-2 py-0.5 rounded",IN_PROGRESS:"bg-yellow-400 text-white px-2 py-0.5 rounded"})[g.toUpperCase()]||"bg-gray-400 text-white px-2 py-0.5 rounded",_=({invoiceContainer:g})=>{const t=document.getElementById("invoiceContainer");if(console.log(t),!t)return;const c=window.open("","","width=800,height=600"),w=Array.from(document.querySelectorAll('link[rel="stylesheet"], style')).map(j=>j.outerHTML).join("");c.document.write(`
        <html>
        <head>
            <title>Print Invoice</title>
        ${w}
        </head>
        <body>
            ${t.innerHTML}
        </body>
        </html>
    `),c.document.close(),c.focus(),c.print(),c.close()};return(g,t)=>(i(),L(D,null,{default:P(()=>[M(k(z),{title:"Invoice"}),e("div",xe,[e("header",ye,[e("div",fe,[u.value.logo?(i(),l("div",he,[e("img",{src:`/storage/${u.value.logo}`,alt:`${u.value.name} logo`,class:"w-20 h-20 object-contain"},null,8,we)])):r("",!0),e("div",null,[e("h1",ke,o(u.value.name),1),e("p",_e,o(u.value.address),1),e("p",Ce,[u.value.phone?(i(),l("span",Ee,o(u.value.phone),1)):r("",!0),u.value.phone&&u.value.email?(i(),l("span",$e," • ")):r("",!0),u.value.email?(i(),l("span",je,o(u.value.email),1)):r("",!0)])])]),e("div",Ne,[t[4]||(t[4]=e("h2",{class:"text-xl font-semibold mb-4"},"INVOICE",-1)),e("div",Ie,[e("div",null,[t[0]||(t[0]=e("span",{class:"font-bold mr-2"},"Invoice #:",-1)),e("span",null,o(n.invoice.invoice_number),1)]),e("div",null,[t[1]||(t[1]=e("span",{class:"font-bold mr-2"},"Date:",-1)),e("span",null,o(y(n.invoice.issue_date)),1)]),e("div",null,[t[2]||(t[2]=e("span",{class:"font-bold mr-2"},"Due Date:",-1)),e("span",null,o(y(n.invoice.due_date)),1)]),e("div",null,[t[3]||(t[3]=e("span",{class:"font-bold mr-2"},"Status:",-1)),e("span",{class:$(h(n.invoice.status))},o(n.invoice.status.toUpperCase()),3)])])])]),e("section",Me,[e("div",null,[t[5]||(t[5]=e("h3",{class:"text-blue-600 text-lg mb-4 border-b border-gray-200 pb-2"},"Bill To",-1)),e("div",Se,[e("p",Ve,o(p.value.name),1),p.value.company?(i(),l("p",De,o(p.value.company),1)):r("",!0),p.value.phone?(i(),l("p",Be,o(p.value.phone),1)):r("",!0),p.value.email?(i(),l("p",Oe,o(p.value.email),1)):r("",!0)])]),d.value?(i(),l("div",Ue,[t[7]||(t[7]=e("h3",{class:"text-blue-600 text-lg mb-4 border-b border-gray-200 pb-2"},"Job Details",-1)),e("div",Te,[d.value.title?(i(),l("p",Je,o(d.value.title),1)):r("",!0),d.value.description?(i(),l("p",Le,o(d.value.description),1)):r("",!0),d.value.start_date||d.value.due_date?(i(),l("div",Pe,[d.value.start_date?(i(),l("span",ze,o(y(d.value.start_date)),1)):r("",!0),d.value.due_date?(i(),l("span",He," - "+o(y(d.value.due_date)),1)):r("",!0)])):r("",!0),d.value.status?(i(),l("p",Re,[t[6]||(t[6]=m(" Status: ",-1)),e("span",{class:$(h(d.value.status))},o(d.value.status.toUpperCase()),3)])):r("",!0)])])):r("",!0)]),e("section",Ae,[t[12]||(t[12]=e("h3",{class:"text-blue-600 text-lg mb-4 border-b border-gray-200 pb-2"},"Invoice Items",-1)),e("div",qe,[t[11]||(t[11]=e("div",{class:"grid grid-cols-4 bg-primary-dark text-white font-bold p-4"},[e("div",null,"Description"),e("div",null,"Qty"),e("div",null,"Unit Price"),e("div",null,"Amount")],-1)),(i(!0),l(H,null,R(n.invoice.items,(c,w)=>(i(),l("div",{key:c.id,id:"invoiceItemsDetails",class:"grid grid-cols-4 gap-2 md:gap-0 p-4 border-b border-gray-200 items-center last:border-b-0"},[e("div",null,[e("div",Fe,o(c.name),1),c.description?(i(),l("div",Ge,o(c.description),1)):r("",!0)]),e("div",null,[t[8]||(t[8]=e("span",{class:"font-bold md:hidden print:hidden"},"Quantity: ",-1)),m(o(c.quantity),1)]),e("div",null,[t[9]||(t[9]=e("span",{class:"font-bold md:hidden print:hidden"},"Unit Price: ",-1)),m(o(b(c.unit_price)),1)]),e("div",null,[t[10]||(t[10]=e("span",{class:"font-bold md:hidden print:hidden"},"Amount: ",-1)),m(o(b(c.total)),1)])]))),128))])]),e("section",We,[e("div",Qe,[e("div",Ke,[t[13]||(t[13]=e("span",null,"Subtotal",-1)),e("span",null,o(b(n.invoice.subtotal)),1)]),n.invoice.tax>0?(i(),l("div",Xe,[t[14]||(t[14]=e("span",null,"Tax",-1)),e("span",null,o(b(n.invoice.tax)),1)])):r("",!0),n.invoice.discount>0?(i(),l("div",Ye,[t[15]||(t[15]=e("span",null,"Discount",-1)),e("span",null,"-"+o(b(n.invoice.discount)),1)])):r("",!0),e("div",Ze,[t[16]||(t[16]=e("span",null,"Total",-1)),e("span",null,o(b(n.invoice.total)),1)])])]),e("div",et,[e("footer",tt,[n.invoice.notes?(i(),l("div",st,[t[17]||(t[17]=e("h4",{class:"mb-2 font-semibold text-gray-800"},"Notes",-1)),e("p",ot,o(n.invoice.notes),1)])):r("",!0)])])],512),e("div",nt,[M(be,{invoice:n.invoice,personalEmail:n.user.email,businessEmail:n.user.business.business_email,class:"mb-8"},null,8,["invoice","personalEmail","businessEmail"]),M(B,{onPrint:_,invoice:n.invoice},null,8,["invoice"])])]),_:1}))}},ut=A(it,[["__scopeId","data-v-2350a2be"]]);export{ut as default};
