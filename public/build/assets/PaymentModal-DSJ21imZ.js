import{m as l,p as I,i as s,y as M,o as n,j as d,a as P,w as F,b as e,s as T,L as V,F as x,q as v,t as m,P as k,d as y,J as g,T as D,e as B}from"./app-DXhGyOzx.js";const J={class:"flex-1 overflow-y-auto px-6 py-5"},U={class:"space-y-5"},O=["value"],A={class:"text-sm text-red-600 italic font-thin"},N={class:"relative rounded-md shadow-sm"},z=["value"],H={__name:"PaymentModal",props:{jobs:{type:Array},showPaymentModal:Boolean},emits:["submit","cancel"],setup(c,{emit:w}){let o=l(""),i=l("");const b=w,r=l({amount:"",jobId:null,date:new Date().toISOString().split("T")[0],method:"bank_transfer",notes:""}),h=l([{value:"cash",label:"Cash"},{value:"bank_transfer",label:"Bank Transfer"},{value:"card",label:"Card"},{value:"other",label:"Other"}]),p=l("90vh");I(()=>{p.value=window.innerHeight>800?"80vh":"90vh"}),l(!1);const j=()=>{if(!o.value===""){alert("Please select a job");return}r.value.amount=o.value.amount},S=()=>{r.value.jobId=o.value.id},C=async()=>{if(r.value.jobId===null){i.value="You must select a Job";return}try{const u=await axios.post("/user/payments/received",r.value);b("submit",{payload:u.data.activity}),r.value={amount:"",jobId:null,date:new Date().toISOString().split("T")[0],method:"bank_transfer",notes:""},i.value="",b("cancel")}catch(u){console.error(u),alert("Failed to record payment")}},f=()=>{r.value={amount:"",jobId:null,date:new Date().toISOString().split("T")[0],method:"bank_transfer",notes:""},i.value="",b("cancel")};return(u,t)=>s((n(),d("div",{class:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/30 backdrop-blur-sm",onClick:B(f,["self"])},[P(D,{"enter-active-class":"transition duration-200 ease-out","enter-from-class":"transform scale-95 opacity-0","enter-to-class":"transform scale-100 opacity-100","leave-active-class":"transition duration-150 ease-in","leave-from-class":"transform scale-100 opacity-100","leave-to-class":"transform scale-95 opacity-0"},{default:F(()=>[e("div",{class:"w-full max-w-md bg-white rounded-xl shadow-2xl overflow-hidden dark:bg-gray-800 flex flex-col",style:T(`max-height: ${p.value}`)},[t[13]||(t[13]=e("div",{class:"px-6 py-5 border-b border-gray-100 dark:border-gray-700"},[e("h2",{class:"text-xl font-semibold text-gray-900 dark:text-white"},"Record Payment")],-1)),e("div",J,[e("div",U,[e("div",null,[t[7]||(t[7]=e("label",{for:"job",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," Select Job ",-1)),s(e("select",{id:"job","onUpdate:modelValue":t[0]||(t[0]=a=>V(o)?o.value=a:o=a),onChange:S,class:"block w-full py-3 px-4 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-primary-500"},[t[6]||(t[6]=e("option",{value:null,disabled:"",selected:""},"Select a job",-1)),(n(!0),d(x,null,v(c.jobs,a=>(n(),d("option",{key:a.id,value:a},m(a.job_title),9,O))),128))],544),[[k,y(o)]]),e("span",A,m(y(i)),1)]),e("div",null,[t[9]||(t[9]=e("label",{for:"amount",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," Amount ",-1)),e("div",N,[t[8]||(t[8]=e("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[e("span",{class:"text-gray-500 dark:text-gray-400 sm:text-sm"},"₦")],-1)),s(e("input",{type:"number",id:"amount","onUpdate:modelValue":t[1]||(t[1]=a=>r.value.amount=a),class:"block w-full pl-7 pr-12 py-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"0.00",step:"0.01",min:"0"},null,512),[[g,r.value.amount]])]),e("button",{onClick:t[2]||(t[2]=a=>j()),class:"mt-2 text-xs font-medium text-primary-600 hover:text-primary-800 dark:text-primary-400 dark:hover:text-primary-300 transition-colors"}," Paid in full (₦"+m(y(o).amount)+") ",1)]),e("div",null,[t[10]||(t[10]=e("label",{for:"date",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," Date ",-1)),s(e("input",{type:"date",id:"date","onUpdate:modelValue":t[3]||(t[3]=a=>r.value.date=a),class:"block w-full py-3 px-4 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-primary-500"},null,512),[[g,r.value.date]])]),e("div",null,[t[11]||(t[11]=e("label",{for:"method",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," Payment Method ",-1)),s(e("select",{id:"method","onUpdate:modelValue":t[4]||(t[4]=a=>r.value.method=a),class:"block w-full py-3 px-4 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-primary-500"},[(n(!0),d(x,null,v(h.value,a=>(n(),d("option",{key:a.value,value:a.value},m(a.label),9,z))),128))],512),[[k,r.value.method]])]),e("div",null,[t[12]||(t[12]=e("label",{for:"notes",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," Notes ",-1)),s(e("textarea",{id:"notes","onUpdate:modelValue":t[5]||(t[5]=a=>r.value.notes=a),rows:"3",class:"block w-full py-3 px-4 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"Additional details about this payment"},null,512),[[g,r.value.notes]])])])]),e("div",{class:"sticky bottom-0 px-6 py-4 bg-gray-50 dark:bg-gray-700/50 border-t border-gray-100 dark:border-gray-700 flex justify-end space-x-3"},[e("button",{onClick:f,class:"px-4 py-2 text-sm border-2 border-red-500 hover:bg-red-200 font-medium text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white rounded-lg transition-colors"}," Cancel "),e("button",{onClick:C,class:"px-4 py-2 bg-primary hover:bg-primary-dark text-white text-sm font-medium rounded-lg shadow-sm transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"}," Save Payment ")])],4)]),_:1})],512)),[[M,c.showPaymentModal]])}};export{H as _};
