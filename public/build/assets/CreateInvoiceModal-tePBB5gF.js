import{j as r,o as d,b as e,S as Z,m as k,g as H,p as L,z as I,t as o,k as x,f as U,n as N,i as u,I as m,d as c,C as F,F as $,q as T,D as E,E as J}from"./app-BijfT9Au.js";import{_ as P}from"./_plugin-vue_export-helper-DlAUqK2U.js";function Pe(h,b){return d(),r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5m-9-6h.008v.008H12v-.008ZM12 15h.008v.008H12V15Zm0 2.25h.008v.008H12v-.008ZM9.75 15h.008v.008H9.75V15Zm0 2.25h.008v.008H9.75v-.008ZM7.5 15h.008v.008H7.5V15Zm0 2.25h.008v.008H7.5v-.008Zm6.75-4.5h.008v.008h-.008v-.008Zm0 2.25h.008v.008h-.008V15Zm0 2.25h.008v.008h-.008v-.008Zm2.25-4.5h.008v.008H16.5v-.008Zm0 2.25h.008v.008H16.5V15Z"})])}function Qe(h,b){return d(),r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1 1 15 0Z"})])}function Re(h,b){return d(),r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.25 6.75c0 8.284 6.716 15 15 15h2.25a2.25 2.25 0 0 0 2.25-2.25v-1.372c0-.516-.351-.966-.852-1.091l-4.423-1.106c-.44-.11-.902.055-1.173.417l-.97 1.293c-.282.376-.769.542-1.21.38a12.035 12.035 0 0 1-7.143-7.143c-.162-.441.004-.928.38-1.21l1.293-.97c.363-.271.527-.734.417-1.173L6.963 3.102a1.125 1.125 0 0 0-1.091-.852H4.5A2.25 2.25 0 0 0 2.25 4.5v2.25Z"})])}function Ge(h,b){return d(),r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M11.48 3.499a.562.562 0 0 1 1.04 0l2.125 5.111a.563.563 0 0 0 .475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 0 0-.182.557l1.285 5.385a.562.562 0 0 1-.84.61l-4.725-2.885a.562.562 0 0 0-.586 0L6.982 20.54a.562.562 0 0 1-.84-.61l1.285-5.386a.562.562 0 0 0-.182-.557l-4.204-3.602a.562.562 0 0 1 .321-.988l5.518-.442a.563.563 0 0 0 .475-.345L11.48 3.5Z"})])}const Q={class:"p-6 bg-white rounded-lg shadow max-w-4xl mx-auto"},R={class:"grid grid-cols-1 md:grid-cols-3 gap-6 p-4 bg-gray-50 rounded-xl"},G={class:"bg-white p-5 rounded-xl shadow-sm border border-gray-100"},O={class:"space-y-3"},K={class:"text-gray-800 font-medium"},W={class:"flex items-center text-sm text-gray-500"},X={class:"flex items-center text-sm text-gray-500"},Y={class:"flex items-start text-sm text-gray-500"},ee={class:"bg-white p-5 rounded-xl shadow-sm border border-gray-100"},te={class:"space-y-3"},se={class:"text-gray-800 font-medium"},oe={key:0,class:"flex items-center text-sm text-gray-500"},le={class:"flex items-center text-sm text-gray-500"},ae={class:"flex items-center text-sm text-gray-500"},ne={class:"bg-white p-5 rounded-xl shadow-sm border border-gray-100"},re={class:"space-y-3"},de={class:"text-gray-800 font-medium"},ie={key:0,class:"text-sm text-gray-500"},ue={key:1,class:"flex flex-wrap gap-2 text-sm text-gray-500"},ce={key:0,class:"inline-flex items-center bg-blue-50 px-2.5 py-0.5 rounded-full text-xs font-medium text-blue-800"},pe={key:1,class:"inline-flex items-center bg-purple-50 px-2.5 py-0.5 rounded-full text-xs font-medium text-purple-800"},ve={key:2,class:"mt-2"},me={class:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-6 mb-4"},xe={class:"text-xs text-red-500 mt-1"},he={class:"text-xs text-red-500 mt-1"},be={class:"mb-4"},we={class:"text-xs text-red-500 mt-1"},ge={class:"mb-4"},_e={class:"flex-1"},fe=["onUpdate:modelValue"],ke={class:"text-xs text-red-500 mt-1"},ye={class:"flex-2"},Ve=["onUpdate:modelValue"],Me={class:"text-xs text-red-500 mt-1"},Ce={class:"w-full md:w-20"},je=["onUpdate:modelValue"],qe={class:"text-xs text-red-500 mt-1"},Be={class:"w-full md:w-24"},Ze=["onUpdate:modelValue"],He={class:"text-xs text-red-500 mt-1"},Ie={class:"flex items-center px-2 mt-6"},Ue={key:0,class:"flex items-center mt-6"},De=["onClick"],ze={class:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4"},Se={class:"text-xs text-red-500 mt-1"},Ae={class:"text-xs text-red-500 mt-1"},Le={class:"mb-4"},Ne={class:"text-xs text-red-500 mt-1"},Fe={class:"mb-4 text-right"},$e={class:"font-medium text-lg"},Te={__name:"CreateInvoiceModal",props:{selectedJob:Number},setup(h){const b=h,p=Z([{name:"",description:"",quantity:1,unit_price:0}]),l=k({issue_date:"",due_date:"",status:"",tax:0,notes:""}),s=k({}),D=H(()=>{switch(s.status?s.status.toLowerCase():""){case"completed":return"bg-green-100 text-green-800";case"in progress":return"bg-blue-100 text-blue-800";case"pending":return"bg-yellow-100 text-yellow-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}}),y=H(()=>{const i=p.reduce((f,g)=>f+g.quantity*g.unit_price,0),t=l.value.discount?parseFloat(l.value.discount):0,w=parseFloat(((i-t)*.075).toFixed(2)),_=parseFloat((i-t+w).toFixed(2));return{subtotal:i,discount:t,vat:w,total:_}});let n=k([]);function z(){p.push({name:"",description:"",quantity:1,unit_price:0})}function S(i){p.splice(i,1)}function A(){p.forEach(t=>{t.name||(n.value.name="Name field is required"),t.description||(n.value.description="Description field is required"),t.quantity||(n.value.quantity="Quantity field is required"),t.unit_price||(n.value.unit_price="Unit price field is required"),l.value.issue_date||(n.value.issue_date="Issue_date is required"),l.value.due_date||(n.value.due_date="Due_date field is required"),l.value.status||(n.value.status="Status price field is required")});const i={business_id:s.value.business.id,customer_id:s.value.customer.id,job_id:s.value.id,job_description:s.value.description,items:p,total:y.value,issue_date:l.value.issue_date,due_date:l.value.due_date,status:l.value.status,tax:l.value.tax,notes:l.value.notes};I.post("/store/invoice/generate",i).then(t=>{J.visit(`/dashboard/invoice/${t.data.invoice.id}`),p.value=Z([{name:"",description:"",quantity:1,unit_price:0}]),l.value=k({issue_date:"",due_date:"",status:"",tax:0,notes:""})}).catch(t=>{console.error("Error submitting invoice:",t.response||t)})}return L(()=>{I.get(`/get_user/job_details/${b.selectedJob}`).then(i=>{i.status===200&&(s.value=i.data)})}),(i,t)=>{var V,w,_,f,g,M,C,j,q;return d(),r("div",Q,[t[29]||(t[29]=e("h2",{class:"text-xl font-bold mb-4"},"Create Invoice",-1)),e("div",R,[e("div",G,[t[8]||(t[8]=e("div",{class:"flex items-center mb-4"},[e("div",{class:"w-3 h-6 rounded-md bg-blue-500 mr-3"}),e("h3",{class:"text-lg font-semibold text-gray-800"},"Business details")],-1)),e("div",O,[e("p",K,o((V=s.value.business)==null?void 0:V.business_name),1),e("div",W,[t[5]||(t[5]=e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})],-1)),e("span",null,o((w=s.value.business)==null?void 0:w.business_email),1)]),e("div",X,[t[6]||(t[6]=e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})],-1)),e("span",null,o((_=s.value.business)==null?void 0:_.business_phone),1)]),e("div",Y,[t[7]||(t[7]=e("svg",{class:"w-4 h-4 mr-2 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})],-1)),e("span",null,o((f=s.value.business)==null?void 0:f.business_address),1)])])]),e("div",ee,[t[12]||(t[12]=e("div",{class:"flex items-center mb-4"},[e("div",{class:"w-3 h-6 rounded-md bg-purple-500 mr-3"}),e("h3",{class:"text-lg font-semibold text-gray-800"},"Customer details")],-1)),e("div",te,[e("p",se,o((g=s.value.customer)==null?void 0:g.name),1),(M=s.value.customer)!=null&&M.company?(d(),r("div",oe,[t[9]||(t[9]=e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})],-1)),e("span",null,o((C=s.value.customer)==null?void 0:C.company),1)])):x("",!0),e("div",le,[t[10]||(t[10]=e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})],-1)),e("span",null,o((j=s.value.customer)==null?void 0:j.email),1)]),e("div",ae,[t[11]||(t[11]=e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})],-1)),e("span",null,o((q=s.value.customer)==null?void 0:q.phone),1)])])]),e("div",ne,[t[15]||(t[15]=e("div",{class:"flex items-center mb-4"},[e("div",{class:"w-3 h-6 rounded-md bg-green-500 mr-3"}),e("h3",{class:"text-lg font-semibold text-gray-800"},"Job details")],-1)),e("div",re,[e("p",de,o(s.value.job_title),1),s.value.description?(d(),r("p",ie,o(s.value.description),1)):x("",!0),s.value.start_date||s.value.due_date?(d(),r("div",ue,[s.value.start_date?(d(),r("span",ce,[t[13]||(t[13]=e("svg",{class:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),U(" Start: "+o(s.value.start_date),1)])):x("",!0),s.value.due_date?(d(),r("span",pe,[t[14]||(t[14]=e("svg",{class:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),U(" Due: "+o(s.value.due_date),1)])):x("",!0)])):x("",!0),s.value.status?(d(),r("div",ve,[e("span",{class:N(["inline-flex items-center px-3 py-1 rounded-full text-xs font-medium",D.value])},o(s.value.status),3)])):x("",!0)])])]),e("div",me,[e("div",null,[t[16]||(t[16]=e("label",{class:"block text-sm mb-1"},"Issue Date",-1)),u(e("input",{"onUpdate:modelValue":t[0]||(t[0]=a=>l.value.issue_date=a),type:"date",class:"border rounded px-2 py-1 w-full"},null,512),[[m,l.value.issue_date]]),e("p",xe,o(c(n).issue_date),1)]),e("div",null,[t[17]||(t[17]=e("label",{class:"block text-sm mb-1"},"Due Date",-1)),u(e("input",{"onUpdate:modelValue":t[1]||(t[1]=a=>l.value.due_date=a),type:"date",class:"border rounded px-2 py-1 w-full"},null,512),[[m,l.value.due_date]]),e("p",he,o(c(n).due_date),1)]),e("div",be,[t[19]||(t[19]=e("label",{class:"block text-sm mb-1"},"Status",-1)),u(e("select",{"onUpdate:modelValue":t[2]||(t[2]=a=>l.value.status=a),class:"border rounded px-2 py-1 w-full"},t[18]||(t[18]=[e("option",{value:"pending"},"Pending",-1),e("option",{value:"paid"},"Paid",-1),e("option",{value:"overdue"},"Overdue",-1),e("option",{value:"cancelled"},"Cancelled",-1)]),512),[[F,l.value.status]]),e("p",we,o(c(n).status),1)])]),e("div",ge,[t[25]||(t[25]=e("label",{class:"block font-medium mb-2"},"Invoice Items",-1)),(d(!0),r($,null,T(p,(a,B)=>(d(),r("div",{key:B,class:"flex flex-col md:flex-row md:space-x-2 mb-2 space-y-2 md:space-y-0"},[e("div",_e,[t[20]||(t[20]=e("label",{class:"block text-sm mb-1"},"Name",-1)),u(e("input",{"onUpdate:modelValue":v=>a.name=v,placeholder:"Design a logo",class:"border rounded px-2 py-1 w-full"},null,8,fe),[[m,a.name]]),e("p",ke,o(c(n).name),1)]),e("div",ye,[t[21]||(t[21]=e("label",{class:"block text-sm mb-1"},"Description",-1)),u(e("input",{"onUpdate:modelValue":v=>a.description=v,placeholder:"Job description",class:"border rounded px-2 py-1 w-full"},null,8,Ve),[[m,a.description]]),e("p",Me,o(c(n).description),1)]),e("div",Ce,[t[22]||(t[22]=e("label",{class:"block text-sm mb-1"},"Qty",-1)),u(e("input",{"onUpdate:modelValue":v=>a.quantity=v,type:"number",class:"border rounded px-2 py-1 w-full"},null,8,je),[[m,a.quantity,void 0,{number:!0}]]),e("p",qe,o(c(n).quantity),1)]),e("div",Be,[t[23]||(t[23]=e("label",{class:"block text-sm mb-1"},"Unit Price",-1)),u(e("input",{"onUpdate:modelValue":v=>a.unit_price=v,type:"number",class:"border rounded px-2 py-1 w-full"},null,8,Ze),[[m,a.unit_price,void 0,{number:!0}]]),e("p",He,o(c(n).unit_price),1)]),e("div",Ie,[e("span",null,"Total: "+o(a.quantity*a.unit_price),1)]),p.length>1?(d(),r("div",Ue,[e("button",{type:"button",onClick:v=>S(B),class:"text-red-500 font-bold"},t[24]||(t[24]=[E('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" class="w-5 h-5" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" data-v-4e0726c9><path d="M3 6h18" data-v-4e0726c9></path> <path d="M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2" data-v-4e0726c9></path> <path d="M6 6l1 14a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2l1-14" data-v-4e0726c9></path> <path d="M10 11v6" data-v-4e0726c9></path> <path d="M14 11v6" data-v-4e0726c9></path></svg>',1)]),8,De)])):x("",!0)]))),128)),e("button",{type:"button",onClick:z,class:"mt-2 px-3 py-1 bg-primary text-white rounded hover:bg-primary-dark"}," Add Item ")]),e("div",ze,[e("div",null,[t[26]||(t[26]=e("label",{class:"block text-sm mb-1"},"Discount",-1)),u(e("input",{"onUpdate:modelValue":t[3]||(t[3]=a=>l.value.discount=a),type:"number",class:"border rounded px-2 py-1 w-full",placeholder:"0.00"},null,512),[[m,l.value.discount,void 0,{number:!0}]]),e("p",Se,o(c(n).discount),1)]),e("div",null,[t[27]||(t[27]=e("label",{class:"block text-sm mb-1"},"Vat: 7.5%",-1)),e("p",Ae,o(y.value.vat),1)])]),e("div",Le,[t[28]||(t[28]=e("label",{class:"block text-sm mb-1"},"Notes",-1)),u(e("textarea",{"onUpdate:modelValue":t[4]||(t[4]=a=>l.value.notes=a),class:"border rounded px-2 py-1 w-full",rows:"3",placeholder:"Additional notes..."},null,512),[[m,l.value.notes]]),e("p",Ne,o(c(n).notes),1)]),e("div",Fe,[e("p",$e,"Invoice Total: "+o(y.value.total),1)]),e("div",{class:"text-right"},[e("button",{onClick:A,class:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700"},"Generate")])])}}},Oe=P(Te,[["__scopeId","data-v-4e0726c9"]]);export{Oe as C,Ge as a,Re as b,Qe as c,Pe as r};
