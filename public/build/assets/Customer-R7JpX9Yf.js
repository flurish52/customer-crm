import{m as r,p as I,c as R,o as a,w as F,a as v,j as n,k as p,b as t,d,e as Y,l as K,f as x,t as l,n as j,z as L,K as O}from"./app-YBu4Y6a0.js";import{a as q,_ as G}from"./AuthenticatedLayout-tqFnkAC4.js";import{d as Q}from"./dayjs.min-BtvDDNs6.js";import{C as W}from"./CreateJob-CGhbaDgq.js";import{J as X,a as Z}from"./Jobs-Osw3KQKg.js";import{_ as tt}from"./PaymentModal-CEllHKZ7.js";import"./aos-DthOhaba.js";import{_ as et}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./CurrencyDollarIcon-BDOYq9u2.js";import"./CheckCircleIcon-iRs8WVnz.js";import"./index-DKtf60Sy.js";const ot={class:""},st={class:"bg-white rounded-xl shadow-sm border border-tertiary-light overflow-hidden mb-8"},rt={class:"flex flex-col items-center pt-8"},lt={class:"relative"},at={key:0,class:"h-24 w-24 rounded-full bg-primary-light/10 flex items-center justify-center text-3xl font-bold text-primary-DEFAULT"},it={key:1,class:"h-24 w-24 rounded-full overflow-hidden border-2 border-primary-light/20"},nt=["src"],dt={class:"text-2xl font-bold text-primary-dark mt-4"},mt={key:0,class:"text-primary-dark/80"},ut={class:"p-6 border-b border-tertiary-light"},ct={class:"flex flex-col md:flex-row gap-6 justify-center"},vt={key:0,class:"flex items-center"},pt={class:"text-primary-dark font-medium"},xt={key:1,class:"flex items-center"},gt={class:"text-primary-dark font-medium"},ht={key:2,class:"flex items-center"},bt={class:"text-primary-dark font-medium"},wt={class:"grid grid-cols-4 divide-x divide-tertiary-light"},yt={class:"p-4 text-center"},ft={class:"text-xl font-bold text-primary-DEFAULT"},kt={class:"p-4 text-center"},Ct={class:"text-xl font-bold text-secondary"},jt={class:"p-4 text-center"},Mt={class:"text-xl font-bold text-primary-dark"},Et={class:"p-4 text-center"},Jt={class:"text-xl font-bold text-primary-dark"},Tt={class:"p-6 border-t border-tertiary-light flex flex-col sm:flex-row gap-3 justify-center"},At={class:"bg-white rounded-xl shadow-sm border border-tertiary-light overflow-hidden"},Bt={class:"px-6 py-4 border-b border-tertiary-light flex justify-between items-center"},Ft={class:"flex items-center space-x-2"},Lt={key:0,class:"divide-y divide-tertiary-light"},St={class:"hover:bg-tertiary-light/20 transition-colors"},Dt={key:1,class:"p-12 text-center"},Pt={class:"mt-1 text-gray-500"},_t={__name:"Customer",props:{customer:Object,totalSpent:Number},setup(o){let S=o,g=r(!1),h=r(!1);const u=r([]),b=r(!1),i=r("all"),w=r(!1),M=r(0),y=r(!1),f=r(!1),k=r({}),E=r({}),D=({payload:s,amountPaid:e})=>{M.value=e,w.value=!0,k.value=s,E.value=k.value.customer,g.value=!0},P=()=>{f.value=!0},_=()=>{f.value=!1},N=()=>{b.value=!0,y.value=!0},J=()=>{y.value=!1,b.value=!1},U=()=>{O.reload({preserveScroll:!0,preserveState:!0})};let $=()=>{w.value=!1,g.value=!g.value};r(0);let T=r();const z=({payload:s})=>{T.value=s,h.value=!0},A=()=>{h.value=!1};let H=({payload:s,jobId:e})=>{L.patch(`/job_update/status/${e}`,{type:"complete_job",satisfaction_score:s}).then(m=>{u.value=m.data.job,A(),alert(m.data.message)})},B=r([]);const V=s=>{L.get(`/get_jobs/${s}`).then(e=>{u.value=e.data,B.value=u.value.filter(m=>m.status!=="completed").length})};I(()=>{V(S.customer.id)});const C=s=>{i.value=s};return(s,e)=>(a(),R(G,null,{default:F(()=>{var m;return[v(W,{customer:E.value,jobToEdit:k.value,onClose:d($),showModal:d(g),amountPaid:M.value,onSubmit:U,isEditingJob:w.value},null,8,["customer","jobToEdit","onClose","showModal","amountPaid","isEditingJob"]),v(X,{jobId:d(T),showModal:d(h),onSubmit:d(H),onClose:A},null,8,["jobId","showModal","onSubmit"]),v(tt,{jobs:u.value,onCancel:_,showPaymentModal:f.value},null,8,["jobs","showPaymentModal"]),y.value?(a(),n("div",{key:0,onClick:Y(J,["self"]),class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"},[v(q,{customerToEdit:o.customer,isEditing:b.value,onCloseAddCustomerModal:J},null,8,["customerToEdit","isEditing"])])):p("",!0),t("div",ot,[v(d(K),{href:"/dashboard",class:"flex items-center text-primary hover:text-primary-dark transition-colors"},{default:F(()=>e[5]||(e[5]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1),x(" Back ",-1)])),_:1,__:[5]}),t("div",st,[t("div",rt,[t("div",lt,[o.customer.avatar?(a(),n("div",it,[t("img",{src:`/storage/${o.customer.avatar}`,alt:"Customer avatar",class:"w-full h-full object-cover"},null,8,nt)])):(a(),n("div",at,l(o.customer.initials),1)),e[6]||(e[6]=t("span",{class:"absolute bottom-2 right-2 h-3 w-3 rounded-full bg-green-500 border-2 border-white"},null,-1))]),t("h1",dt,l(o.customer.name),1),o.customer.company?(a(),n("p",mt,l(o.customer.company),1)):p("",!0)]),t("div",ut,[t("div",ct,[o.customer.email?(a(),n("div",vt,[e[8]||(e[8]=t("div",{class:"bg-primary-light/10 p-2 rounded-lg mr-3"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-primary-DEFAULT",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})])],-1)),t("div",null,[e[7]||(e[7]=t("p",{class:"text-xs text-gray-500"},"Email",-1)),t("p",pt,l(o.customer.email),1)])])):p("",!0),o.customer.phone?(a(),n("div",xt,[e[10]||(e[10]=t("div",{class:"bg-primary-light/10 p-2 rounded-lg mr-3"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-primary-DEFAULT",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})])],-1)),t("div",null,[e[9]||(e[9]=t("p",{class:"text-xs text-gray-500"},"Phone",-1)),t("p",gt,l(o.customer.phone),1)])])):p("",!0),o.customer.address?(a(),n("div",ht,[e[12]||(e[12]=t("div",{class:"bg-primary-light/10 p-2 rounded-lg mr-3"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-primary-DEFAULT",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})])],-1)),t("div",null,[e[11]||(e[11]=t("p",{class:"text-xs text-gray-500"},"Address",-1)),t("p",bt,l(o.customer.address),1)])])):p("",!0)])]),e[20]||(e[20]=t("div",{class:"hidden md:block h-0.5 w-full bg-tertiary-dark/30 my-2"},null,-1)),t("div",wt,[t("div",yt,[e[13]||(e[13]=t("p",{class:"text-sm text-gray-500"},"Total Jobs",-1)),t("p",ft,l((m=u.value)==null?void 0:m.length),1)]),t("div",kt,[e[14]||(e[14]=t("p",{class:"text-sm text-gray-500"},"Active Jobs",-1)),t("p",Ct,l(d(B)),1)]),t("div",jt,[e[15]||(e[15]=t("p",{class:"text-sm text-gray-500"},"Total Spent",-1)),t("p",Mt,"â‚¦ "+l(o.totalSpent),1)]),t("div",Et,[e[16]||(e[16]=t("p",{class:"text-sm text-gray-500"},"Since",-1)),t("p",Jt,l(d(Q)(o.customer.created_at).format("MMM D, YYYY")),1)])]),t("div",Tt,[t("button",{onClick:e[0]||(e[0]=(...c)=>s.showModalComponent&&s.showModalComponent(...c)),class:"px-6 py-3 bg-primary text-white rounded-lg hover:bg-primary-dark transition-colors flex items-center justify-center"},e[17]||(e[17]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),x(" Create Job ",-1)])),t("button",{onClick:N,class:"px-6 py-3 border border-primary-DEFAULT text-primary-DEFAULT rounded-lg hover:bg-primary-light/10 transition-colors flex items-center justify-center"},e[18]||(e[18]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1),x(" Edit Profile ",-1)])),t("button",{onClick:P,class:"px-6 py-3 bg-primary text-white rounded-lg hover:bg-primary-dark transition-colors flex items-center justify-center"},e[19]||(e[19]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),x(" Made payment ",-1)]))])]),t("div",At,[t("div",Bt,[e[21]||(e[21]=t("h2",{class:"text-xl font-bold text-primary-dark"},"Job History",-1)),t("div",Ft,[t("button",{onClick:e[1]||(e[1]=c=>C("all")),class:j(["px-3 py-1 text-sm rounded-md",{"bg-primary-DEFAULT text-white":i.value==="all","text-primary-dark hover:bg-tertiary-light":i.value!=="all"}])}," All ",2),t("button",{onClick:e[2]||(e[2]=c=>C("active")),class:j(["px-3 py-1 text-sm rounded-md",{"bg-secondary-light text-secondary-dark":i.value==="active","text-primary-dark hover:bg-tertiary-light":i.value!=="active"}])}," Active ",2),t("button",{onClick:e[3]||(e[3]=c=>C("completed")),class:j(["px-3 py-1 text-sm rounded-md",{"bg-green-100 text-green-800":i.value==="completed","text-primary-dark hover:bg-tertiary-light":i.value!=="completed"}])}," Completed ",2)])]),u.value.length>0?(a(),n("div",Lt,[t("div",St,[v(Z,{jobs:o.customer.jobs,onIsEditing:D,onShowModal:s.showModalComponent,onCompleteJob:z,class:""},null,8,["jobs","onShowModal"])])])):(a(),n("div",Dt,[e[23]||(e[23]=t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-12 w-12 mx-auto text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})],-1)),e[24]||(e[24]=t("h3",{class:"mt-2 text-lg font-medium text-primary-dark"},"No jobs found",-1)),t("p",Pt,"This customer doesn't have any "+l(i.value==="all"?"":i.value)+" jobs yet",1),t("button",{onClick:e[4]||(e[4]=(...c)=>s.startNewJob&&s.startNewJob(...c)),class:"mt-4 px-4 py-2 bg-secondary-DEFAULT text-white rounded-lg hover:bg-secondary-dark transition-colors flex items-center mx-auto"},e[22]||(e[22]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),x(" Create New Job ",-1)]))]))])])]}),_:1}))}},qt=et(_t,[["__scopeId","data-v-8cf10a9b"]]);export{qt as default};
