import{A as $}from"./aos-BR47gbSh.js";import{g as l,o as i,b as t,m as k,j as x,a as u,t as o,n as m,w as y,i as g,T as A,F as B,H as D,L as V,s as P,c as L,f as b,d as w}from"./app-b2jftaPc.js";import{g as F}from"./index-CH_iu5NA.js";import{_ as j}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{a as H}from"./AuthenticatedLayout-B5RKloO-.js";import"./UserIcon-AKME3MdA.js";function O(d,r){return i(),l("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.25 18.75a60.07 60.07 0 0 1 15.797 2.101c.727.198 1.453-.342 1.453-1.096V18.75M3.75 4.5v.75A.75.75 0 0 1 3 6h-.75m0 0v-.375c0-.621.504-1.125 1.125-1.125H20.25M2.25 6v9m18-10.5v.75c0 .414.336.75.75.75h.75m-1.5-1.5h.375c.621 0 1.125.504 1.125 1.125v9.75c0 .621-.504 1.125-1.125 1.125h-.375m1.5-1.5H21a.75.75 0 0 0-.75.75v.75m0 0H3.75m0 0h-.375a1.125 1.125 0 0 1-1.125-1.125V15m1.5 1.5v-.75A.75.75 0 0 0 3 15h-.75M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm3 0h.008v.008H18V10.5Zm-12 0h.008v.008H6V10.5Z"})])}function T(d,r){return i(),l("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 3c2.755 0 5.455.232 8.083.678.533.09.917.556.917 1.096v1.044a2.25 2.25 0 0 1-.659 1.591l-5.432 5.432a2.25 2.25 0 0 0-.659 1.591v2.927a2.25 2.25 0 0 1-1.244 2.013L9.75 21v-6.568a2.25 2.25 0 0 0-.659-1.591L3.659 7.409A2.25 2.25 0 0 1 3 5.818V4.774c0-.54.384-1.006.917-1.096A48.32 48.32 0 0 1 12 3Z"})])}const J={class:"max-w-4xl mx-auto px-4 py-6"},z={class:"p-6 text-white relative h-full flex flex-col"},E={class:"flex justify-between items-start"},I={class:"text-3xl font-bold mt-1"},Z={class:"text-xs opacity-80 mt-1"},R={key:0,class:"mt-auto pt-4 border-t border-white/20"},U={class:"grid grid-cols-2 gap-4 text-sm"},G={class:"font-medium"},W={class:"font-medium"},Y=["data-index"],q={class:"p-5"},K={class:"flex justify-between items-start mb-3"},Q={class:"font-semibold text-gray-900"},X={class:"text-xs text-gray-500 mt-1"},tt={class:"text-right"},et={class:"font-bold text-primary"},st={class:"text-xs text-gray-500 mt-1"},at={key:0,class:"mt-3 pt-3 border-t border-gray-100"},ot={class:"flex justify-between"},nt={class:"text-sm font-medium text-gray-700"},rt={class:"flex items-center mt-1"},it={class:"text-xs text-gray-500 capitalize"},lt={class:"text-sm text-gray-700"},ct={key:1,class:"mt-3 pt-3 border-t border-gray-100"},dt={class:"mt-3 pt-3 border-t border-gray-100"},ut={class:"flex justify-between items-center"},mt={class:"text-xs px-2 py-1 bg-gray-100 rounded-md text-gray-700 capitalize"},pt=["onClick"],vt={key:0,class:"text-xs text-gray-500 mt-2 italic truncate"},ft={__name:"Payments",props:{payments:Array},setup(d){const r=d,c=k(!1),p=a=>{a.style.opacity=0,a.style.transform="translateY(20px)"},v=(a,e)=>{F.to(a,{opacity:1,y:0,duration:.5,delay:a.dataset.index*.1,onComplete:e})},n=x(()=>r.payments.reduce((a,e)=>a+parseFloat(JSON.parse(e.changes).amount||0),0)),h=x(()=>r.payments.length?n.value/r.payments.length:0),N=x(()=>{if(r.payments.length===0)return"N/A";const a=r.payments.map(s=>new Date(s.created_at)),e=new Date(Math.max(...a));return _(e)}),f=a=>new Intl.NumberFormat("en-US",{style:"currency",currency:"NGN",minimumFractionDigits:2}).format(a),_=a=>new Date(a).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),C=a=>a.split("_").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" "),M=a=>{console.log("View details for payment:",a.id)};return(a,e)=>(i(),l("div",J,[t("div",{class:m(["bg-gradient-to-r from-primary to-primary-dark rounded-xl shadow-lg overflow-hidden mb-8 transition-all duration-300",{"h-48":c.value,"h-32":!c.value}])},[t("div",z,[t("div",E,[t("div",null,[e[1]||(e[1]=t("p",{class:"text-sm font-medium opacity-90"},"Total Received",-1)),t("h2",I,o(f(n.value)),1),t("p",Z,o(d.payments.length)+" payment"+o(d.payments.length!==1?"s":""),1)]),t("button",{onClick:e[0]||(e[0]=s=>c.value=!c.value),class:"p-2 rounded-full bg-white/10 hover:bg-white/20 transition-colors"},[(i(),l("svg",{xmlns:"http://www.w3.org/2000/svg",class:m(["h-5 w-5 transform transition-transform duration-300",{"rotate-180":c.value}]),viewBox:"0 0 20 20",fill:"currentColor"},e[2]||(e[2]=[t("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)]),2))])]),u(A,{"enter-active-class":"transition-opacity duration-300","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition-opacity duration-200","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:y(()=>[c.value?(i(),l("div",R,[t("div",U,[t("div",null,[e[3]||(e[3]=t("p",{class:"opacity-80"},"Average Payment",-1)),t("p",G,o(f(h.value)),1)]),t("div",null,[e[4]||(e[4]=t("p",{class:"opacity-80"},"Last Payment",-1)),t("p",W,o(N.value),1)])])])):g("",!0)]),_:1})])],2),u(V,{name:"list",tag:"ul",class:"space-y-4",appear:"",onBeforeEnter:p,onEnter:v},{default:y(()=>[(i(!0),l(B,null,D(d.payments,(s,S)=>(i(),l("li",{key:s.id,"data-index":S,class:"bg-white rounded-xl shadow-sm overflow-hidden border border-gray-100 hover:shadow-md transition-all duration-200"},[t("div",q,[t("div",K,[t("div",null,[t("h3",Q,o(s.customer.name),1),t("p",X,o(s.customer.company||"Individual"),1)]),t("div",tt,[t("p",et,o(f(JSON.parse(s.changes).amount)),1),t("p",st,o(_(s.created_at)),1)])]),s.subject?(i(),l("div",at,[t("div",ot,[t("div",null,[t("p",nt,o(s.subject.job_title),1),t("div",rt,[t("span",{class:m(["inline-block w-2 h-2 rounded-full mr-2",{"bg-green-500":s.subject.status==="completed","bg-blue-500":s.subject.status==="in_progress","bg-amber-500":s.subject.status==="pending"}])},null,2),t("span",it,o(s.subject.status),1)])]),t("p",lt,o(f(s.subject.amount)),1)])])):(i(),l("div",ct,e[5]||(e[5]=[t("p",{class:"text-sm text-gray-500 italic"},"No associated job",-1)]))),t("div",dt,[t("div",ut,[t("span",mt,o(C(JSON.parse(s.changes).method)),1),t("button",{onClick:wt=>M(s),class:"text-xs font-medium text-primary hover:text-primary-dark transition-colors"}," View Details ",8,pt)]),JSON.parse(s.changes).notes?(i(),l("p",vt,' "'+o(JSON.parse(s.changes).notes)+'" ',1)):g("",!0)])])],8,Y))),128))]),_:1})]))}},ht=j(ft,[["__scopeId","data-v-f52b6f0f"]]),xt={class:"space-y-6"},yt={class:"flex flex-col justify-between gap-4 md:flex-row md:items-center","data-aos":"fade-down","data-aos-duration":"300"},_t={class:"flex gap-3"},gt={"data-aos":"fade-up","data-aos-duration":"400","data-aos-delay":"100"},bt={__name:"Payments",props:{payments:Array},setup(d){const r=k(null),c=v=>{r.value=v},p=()=>{r.value=null};return P(()=>{$.init({once:!0,easing:"ease-out-cubic",offset:50})}),(v,n)=>(i(),L(H,null,{default:y(()=>[t("div",xt,[t("div",yt,[n[4]||(n[4]=t("div",null,[t("h1",{class:"text-2xl font-bold tracking-tight text-gray-900"},"Payments"),t("p",{class:"mt-1 text-sm text-gray-500"},"Transaction history and records")],-1)),t("div",_t,[t("button",{class:"btn-secondary hover:scale-[1.02] transition-transform",onMouseenter:n[0]||(n[0]=h=>c("filter")),onMouseleave:p},[u(w(T),{class:m(["w-5 h-5 mr-2 transition-transform",{"rotate-12":r.value==="filter"}])},null,8,["class"]),n[2]||(n[2]=b(" Filters ",-1))],32),t("button",{class:"btn-primary hover:scale-[1.02] transition-transform",onMouseenter:n[1]||(n[1]=h=>c("record")),onMouseleave:p},[u(w(O),{class:m(["w-5 h-5 mr-2 transition-transform",{"scale-110":r.value==="record"}])},null,8,["class"]),n[3]||(n[3]=b(" Record Payment ",-1))],32)])]),t("div",gt,[u(ht,{payments:d.payments,class:"mt-6"},null,8,["payments"])])])]),_:1}))}},$t=j(bt,[["__scopeId","data-v-47136725"]]);export{$t as default};
