import{A as S}from"./aos-D1lOtihY.js";import{j as c,o as l,b as t,m as b,g,a as m,t as o,n as p,w,k,T as $,F as A,q as B,Q as D,p as V,c as F,f as j,d as M,E as L}from"./app-VKdpvpg5.js";import{g as O}from"./index-DKtf60Sy.js";import{_ as C}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{_ as T}from"./AuthenticatedLayout-CD8uY5zI.js";import{_ as E}from"./PaymentModal-CR1ZHxSc.js";function H(d,r){return l(),c("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.25 18.75a60.07 60.07 0 0 1 15.797 2.101c.727.198 1.453-.342 1.453-1.096V18.75M3.75 4.5v.75A.75.75 0 0 1 3 6h-.75m0 0v-.375c0-.621.504-1.125 1.125-1.125H20.25M2.25 6v9m18-10.5v.75c0 .414.336.75.75.75h.75m-1.5-1.5h.375c.621 0 1.125.504 1.125 1.125v9.75c0 .621-.504 1.125-1.125 1.125h-.375m1.5-1.5H21a.75.75 0 0 0-.75.75v.75m0 0H3.75m0 0h-.375a1.125 1.125 0 0 1-1.125-1.125V15m1.5 1.5v-.75A.75.75 0 0 0 3 15h-.75M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm3 0h.008v.008H18V10.5Zm-12 0h.008v.008H6V10.5Z"})])}function J(d,r){return l(),c("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 3c2.755 0 5.455.232 8.083.678.533.09.917.556.917 1.096v1.044a2.25 2.25 0 0 1-.659 1.591l-5.432 5.432a2.25 2.25 0 0 0-.659 1.591v2.927a2.25 2.25 0 0 1-1.244 2.013L9.75 21v-6.568a2.25 2.25 0 0 0-.659-1.591L3.659 7.409A2.25 2.25 0 0 1 3 5.818V4.774c0-.54.384-1.006.917-1.096A48.32 48.32 0 0 1 12 3Z"})])}const z={class:"max-w-4xl mx-auto px-4 py-6"},I={class:"p-6 text-white relative h-full flex flex-col"},Z={class:"flex justify-between items-start"},R={class:"text-3xl font-bold mt-1"},U={class:"text-xs opacity-80 mt-1"},G={key:0,class:"mt-auto pt-4 border-t border-white/20"},q={class:"grid grid-cols-2 gap-4 text-sm"},Q={class:"font-medium"},W={class:"font-medium"},Y=["data-index"],K={class:"p-5"},X={class:"flex justify-between items-start mb-3"},tt={class:"font-semibold text-gray-900"},et={class:"text-xs text-gray-500 mt-1"},st={class:"text-right"},at={class:"font-bold text-primary"},ot={class:"text-xs text-gray-500 mt-1"},nt={key:0,class:"mt-3 pt-3 border-t border-gray-100"},rt={class:"flex justify-between"},lt={class:"text-sm font-medium text-gray-700"},it={class:"flex items-center mt-1"},ct={class:"text-xs text-gray-500 capitalize"},dt={class:"text-sm text-gray-700"},ut={key:1,class:"mt-3 pt-3 border-t border-gray-100"},mt={class:"mt-3 pt-3 border-t border-gray-100"},pt={class:"flex justify-between items-center"},vt={class:"text-xs px-2 py-1 bg-gray-100 rounded-md text-gray-700 capitalize"},ft=["onClick"],ht={key:0,class:"text-xs text-gray-500 mt-2 italic truncate"},yt={__name:"Payments",props:{payments:Array},setup(d){const r=d,i=b(!1),v=a=>{a.style.opacity=0,a.style.transform="translateY(20px)"},y=(a,e)=>{O.to(a,{opacity:1,y:0,duration:.5,delay:a.dataset.index*.1,onComplete:e})},f=g(()=>r.payments.reduce((a,e)=>a+parseFloat(JSON.parse(e.changes).amount||0),0)),x=g(()=>r.payments.length?f.value/r.payments.length:0),h=g(()=>{if(r.payments.length===0)return"N/A";const a=r.payments.map(s=>new Date(s.created_at)),e=new Date(Math.max(...a));return n(e)}),u=a=>new Intl.NumberFormat("en-US",{style:"currency",currency:"NGN",minimumFractionDigits:2}).format(a),n=a=>new Date(a).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),_=a=>a.split("_").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" "),P=a=>{console.log("View details for payment:",a.id)};return(a,e)=>(l(),c("div",z,[t("div",{class:p(["bg-gradient-to-r from-primary to-primary-dark rounded-xl shadow-lg overflow-hidden mb-8 transition-all duration-300",{"h-48":i.value,"h-32":!i.value}])},[t("div",I,[t("div",Z,[t("div",null,[e[1]||(e[1]=t("p",{class:"text-sm font-medium opacity-90"},"Total Received",-1)),t("h2",R,o(u(f.value)),1),t("p",U,o(d.payments.length)+" payment"+o(d.payments.length!==1?"s":""),1)]),t("button",{onClick:e[0]||(e[0]=s=>i.value=!i.value),class:"p-2 rounded-full bg-white/10 hover:bg-white/20 transition-colors"},[(l(),c("svg",{xmlns:"http://www.w3.org/2000/svg",class:p(["h-5 w-5 transform transition-transform duration-300",{"rotate-180":i.value}]),viewBox:"0 0 20 20",fill:"currentColor"},e[2]||(e[2]=[t("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)]),2))])]),m($,{"enter-active-class":"transition-opacity duration-300","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition-opacity duration-200","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:w(()=>[i.value?(l(),c("div",G,[t("div",q,[t("div",null,[e[3]||(e[3]=t("p",{class:"opacity-80"},"Average Payment",-1)),t("p",Q,o(u(x.value)),1)]),t("div",null,[e[4]||(e[4]=t("p",{class:"opacity-80"},"Last Payment",-1)),t("p",W,o(h.value),1)])])])):k("",!0)]),_:1})])],2),m(D,{name:"list",tag:"ul",class:"space-y-4",appear:"",onBeforeEnter:v,onEnter:y},{default:w(()=>[(l(!0),c(A,null,B(d.payments,(s,N)=>(l(),c("li",{key:s.id,"data-index":N,class:"bg-white rounded-xl shadow-sm overflow-hidden border border-gray-100 hover:shadow-md transition-all duration-200"},[t("div",K,[t("div",X,[t("div",null,[t("h3",tt,o(s.customer.name),1),t("p",et,o(s.customer.company||"Individual"),1)]),t("div",st,[t("p",at,o(u(JSON.parse(s.changes).amount)),1),t("p",ot,o(n(s.created_at)),1)])]),s.subject?(l(),c("div",nt,[t("div",rt,[t("div",null,[t("p",lt,o(s.subject.job_title),1),t("div",it,[t("span",{class:p(["inline-block w-2 h-2 rounded-full mr-2",{"bg-green-500":s.subject.status==="completed","bg-blue-500":s.subject.status==="in_progress","bg-amber-500":s.subject.status==="pending"}])},null,2),t("span",ct,o(s.subject.status),1)])]),t("p",dt,o(u(s.subject.amount)),1)])])):(l(),c("div",ut,e[5]||(e[5]=[t("p",{class:"text-sm text-gray-500 italic"},"No associated job",-1)]))),t("div",mt,[t("div",pt,[t("span",vt,o(_(JSON.parse(s.changes).method)),1),t("button",{onClick:jt=>P(s),class:"text-xs font-medium text-primary hover:text-primary-dark transition-colors"}," View Details ",8,ft)]),JSON.parse(s.changes).notes?(l(),c("p",ht,' "'+o(JSON.parse(s.changes).notes)+'" ',1)):k("",!0)])])],8,Y))),128))]),_:1})]))}},xt=C(yt,[["__scopeId","data-v-f52b6f0f"]]),_t={class:"space-y-6"},gt={class:"flex flex-col justify-between gap-4 md:flex-row md:items-center","data-aos":"fade-down","data-aos-duration":"300"},bt={class:"flex gap-3"},wt={"data-aos":"fade-up","data-aos-duration":"400","data-aos-delay":"100"},kt={__name:"Payments",props:{payments:Array,jobs:Array},setup(d){const r=b(null),i=b(!1),v=u=>{r.value=u},y=()=>{i.value=!0},f=()=>{i.value=!1},x=()=>{L.reload()},h=()=>{r.value=null};return V(()=>{S.init({once:!0,easing:"ease-out-cubic",offset:50})}),(u,n)=>(l(),F(T,null,{default:w(()=>[m(E,{onCancel:f,onSubmit:x,jobs:d.jobs,showPaymentModal:i.value},null,8,["jobs","showPaymentModal"]),t("div",_t,[t("div",gt,[n[4]||(n[4]=t("div",null,[t("h1",{class:"text-2xl font-bold tracking-tight text-gray-900"},"Payments"),t("p",{class:"mt-1 text-sm text-gray-500"},"Transaction history and records")],-1)),t("div",bt,[t("button",{class:"btn-secondary hover:scale-[1.02] transition-transform",onMouseenter:n[0]||(n[0]=_=>v("filter")),onMouseleave:h},[m(M(J),{class:p(["w-5 h-5 mr-2 transition-transform",{"rotate-12":r.value==="filter"}])},null,8,["class"]),n[2]||(n[2]=j(" Filters ",-1))],32),t("button",{class:"btn-primary hover:scale-[1.02] transition-transform",onMouseenter:n[1]||(n[1]=_=>v("record")),onMouseleave:h,onClick:y},[m(M(H),{class:p(["w-5 h-5 mr-2 transition-transform",{"scale-110":r.value==="record"}])},null,8,["class"]),n[3]||(n[3]=j(" Record Payment ",-1))],32)])]),t("div",wt,[m(xt,{payments:d.payments,class:"mt-6"},null,8,["payments"])])])]),_:1}))}},At=C(kt,[["__scopeId","data-v-2f0a70c4"]]);export{At as default};
