import{m as s,p as I,c as R,o as a,w as F,a as v,j as n,k as x,b as t,d,e as Y,l as K,f as p,t as l,n as j,K as O,z as L,L as q}from"./app-BOu0P6go.js";import{a as G,_ as Q}from"./AuthenticatedLayout-xZMowm-y.js";import{d as W}from"./dayjs.min-BuYFR5Ni.js";import{C as X}from"./CreateJob-ntt_190R.js";import{J as Z,a as tt}from"./Jobs-CrOdkJvG.js";import{_ as et}from"./PaymentModal-P1Us1nCs.js";import"./aos-YzgBcDfi.js";import{_ as ot}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./CurrencyDollarIcon-0U282Hjv.js";import"./CheckCircleIcon-CU8H0r1u.js";import"./index-DKtf60Sy.js";const st={class:""},rt={class:"bg-white rounded-xl shadow-sm border border-tertiary-light overflow-hidden mb-8"},lt={class:"flex flex-col items-center pt-8"},at={class:"relative"},it={key:0,class:"h-24 w-24 rounded-full bg-primary-light/10 flex items-center justify-center text-3xl font-bold text-primary-DEFAULT"},nt={key:1,class:"h-24 w-24 rounded-full overflow-hidden border-2 border-primary-light/20"},dt=["src"],mt={class:"text-2xl font-bold text-primary-dark mt-4"},ut={key:0,class:"text-primary-dark/80"},ct={class:"p-6 border-b border-tertiary-light"},vt={class:"flex flex-col md:flex-row gap-6 justify-center"},xt={key:0,class:"flex items-center"},pt={class:"text-primary-dark font-medium"},gt={key:1,class:"flex items-center"},ht={class:"text-primary-dark font-medium"},bt={key:2,class:"flex items-center"},ft={class:"text-primary-dark font-medium"},wt={class:"grid grid-cols-4 divide-x divide-tertiary-light"},yt={class:"p-4 text-center"},kt={class:"text-xl font-bold text-primary-DEFAULT"},Ct={class:"p-4 text-center"},jt={class:"text-xl font-bold text-secondary"},Mt={class:"p-4 text-center"},Et={class:"text-xl font-bold text-primary-dark"},Jt={class:"p-4 text-center"},Tt={class:"text-xl font-bold text-primary-dark"},At={class:"bg-white rounded-xl shadow-sm border border-tertiary-light overflow-hidden"},Bt={class:"px-6 py-4 border-b border-tertiary-light flex justify-between items-center"},_t={class:"flex items-center space-x-2"},Ft={key:0,class:"divide-y divide-tertiary-light"},Lt={class:"hover:bg-tertiary-light/20 transition-colors"},St={key:1,class:"p-12 text-center"},Dt={class:"mt-1 text-gray-500"},Pt={__name:"Customer",props:{customer:Object,totalSpent:Number},setup(o){let S=o,m=s(!1),g=s(!1);const c=s([]),h=s(!1),i=s("all"),b=s(!1),M=s(0),f=s(!1),w=s(!1),y=s({}),E=s({}),D=({payload:r,amountPaid:e})=>{M.value=e,b.value=!0,y.value=r,E.value=y.value.customer,m.value=!0},P=()=>{w.value=!0},$=()=>{w.value=!1},J=()=>{h.value=!0,f.value=!0},T=()=>{f.value=!1,h.value=!1},U=()=>{q.reload({preserveScroll:!0,preserveState:!0})};let z=()=>{b.value=!1,m.value=!m.value};s(0);let A=s();const H=({payload:r})=>{A.value=r,g.value=!0},B=()=>{g.value=!1};let V=({payload:r,jobId:e})=>{L.patch(`/job_update/status/${e}`,{type:"complete_job",satisfaction_score:r}).then(u=>{c.value=u.data.job,B(),alert(u.data.message)})},_=s([]);const N=r=>{L.get(`/get_jobs/${r}`).then(e=>{c.value=e.data,_.value=c.value.filter(u=>u.status!=="completed").length})};I(()=>{N(S.customer.id)});const k=r=>{i.value=r};return(r,e)=>(a(),R(Q,null,{default:F(()=>{var u;return[v(X,{customer:E.value,jobToEdit:y.value,onClose:d(z),showModal:d(m),amountPaid:M.value,onSubmit:U,isEditingJob:b.value},null,8,["customer","jobToEdit","onClose","showModal","amountPaid","isEditingJob"]),v(Z,{jobId:d(A),showModal:d(g),onSubmit:d(V),onClose:B},null,8,["jobId","showModal","onSubmit"]),v(et,{jobs:c.value,onCancel:$,showPaymentModal:w.value},null,8,["jobs","showPaymentModal"]),f.value?(a(),n("div",{key:0,onClick:Y(T,["self"]),class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"},[v(G,{customerToEdit:o.customer,isEditing:h.value,onCloseAddCustomerModal:T},null,8,["customerToEdit","isEditing"])])):x("",!0),t("div",st,[v(d(K),{href:"/dashboard",class:"flex items-center text-primary hover:text-primary-dark transition-colors"},{default:F(()=>e[4]||(e[4]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1),p(" Back ",-1)])),_:1,__:[4]}),t("div",rt,[t("div",lt,[t("div",at,[o.customer.avatar?(a(),n("div",nt,[t("img",{src:`/storage/${o.customer.avatar}`,alt:"Customer avatar",class:"w-full h-full object-cover"},null,8,dt)])):(a(),n("div",it,l(o.customer.initials),1)),e[5]||(e[5]=t("span",{class:"absolute bottom-2 right-2 h-3 w-3 rounded-full bg-green-500 border-2 border-white"},null,-1))]),t("h1",mt,l(o.customer.name),1),o.customer.company?(a(),n("p",ut,l(o.customer.company),1)):x("",!0)]),t("div",ct,[t("div",vt,[o.customer.email?(a(),n("div",xt,[e[7]||(e[7]=t("div",{class:"bg-primary-light/10 p-2 rounded-lg mr-3"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-primary-DEFAULT",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})])],-1)),t("div",null,[e[6]||(e[6]=t("p",{class:"text-xs text-gray-500"},"Email",-1)),t("p",pt,l(o.customer.email),1)])])):x("",!0),o.customer.phone?(a(),n("div",gt,[e[9]||(e[9]=t("div",{class:"bg-primary-light/10 p-2 rounded-lg mr-3"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-primary-DEFAULT",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})])],-1)),t("div",null,[e[8]||(e[8]=t("p",{class:"text-xs text-gray-500"},"Phone",-1)),t("p",ht,l(o.customer.phone),1)])])):x("",!0),o.customer.address?(a(),n("div",bt,[e[11]||(e[11]=t("div",{class:"bg-primary-light/10 p-2 rounded-lg mr-3"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-primary-DEFAULT",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})])],-1)),t("div",null,[e[10]||(e[10]=t("p",{class:"text-xs text-gray-500"},"Address",-1)),t("p",ft,l(o.customer.address),1)])])):x("",!0)])]),e[19]||(e[19]=t("div",{class:"hidden md:block h-0.5 w-full bg-tertiary-dark/30 my-2"},null,-1)),t("div",wt,[t("div",yt,[e[12]||(e[12]=t("p",{class:"text-sm text-gray-500"},"Total Jobs",-1)),t("p",kt,l((u=c.value)==null?void 0:u.length),1)]),t("div",Ct,[e[13]||(e[13]=t("p",{class:"text-sm text-gray-500"},"Active Jobs",-1)),t("p",jt,l(d(_)),1)]),t("div",Mt,[e[14]||(e[14]=t("p",{class:"text-sm text-gray-500"},"Total Spent",-1)),t("p",Et,"â‚¦ "+l(o.totalSpent),1)]),t("div",Jt,[e[15]||(e[15]=t("p",{class:"text-sm text-gray-500"},"Since",-1)),t("p",Tt,l(d(W)(o.customer.created_at).format("MMM D, YYYY")),1)])]),t("div",{class:"p-6 border-t border-tertiary-light flex flex-col sm:flex-row gap-3 justify-center"},[t("button",{onClick:J,class:"px-6 py-3 bg-primary text-white rounded-lg hover:bg-primary-dark transition-colors flex items-center justify-center"},e[16]||(e[16]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),p(" Create Job ",-1)])),t("button",{onClick:J,class:"px-6 py-3 border border-primary-DEFAULT text-primary-DEFAULT rounded-lg hover:bg-primary-light/10 transition-colors flex items-center justify-center"},e[17]||(e[17]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1),p(" Edit Profile ",-1)])),t("button",{onClick:P,class:"px-6 py-3 bg-primary text-white rounded-lg hover:bg-primary-dark transition-colors flex items-center justify-center"},e[18]||(e[18]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),p(" Made payment ",-1)]))])]),t("div",At,[t("div",Bt,[e[20]||(e[20]=t("h2",{class:"text-xl font-bold text-primary-dark"},"Job History",-1)),t("div",_t,[t("button",{onClick:e[0]||(e[0]=C=>k("all")),class:j(["px-3 py-1 text-sm rounded-md",{"bg-primary-DEFAULT text-white":i.value==="all","text-primary-dark hover:bg-tertiary-light":i.value!=="all"}])}," All ",2),t("button",{onClick:e[1]||(e[1]=C=>k("active")),class:j(["px-3 py-1 text-sm rounded-md",{"bg-secondary-light text-secondary-dark":i.value==="active","text-primary-dark hover:bg-tertiary-light":i.value!=="active"}])}," Active ",2),t("button",{onClick:e[2]||(e[2]=C=>k("completed")),class:j(["px-3 py-1 text-sm rounded-md",{"bg-green-100 text-green-800":i.value==="completed","text-primary-dark hover:bg-tertiary-light":i.value!=="completed"}])}," Completed ",2)])]),c.value.length>0?(a(),n("div",Ft,[t("div",Lt,[v(tt,{jobs:o.customer.jobs||{},onIsEditing:D,onShowModal:r.showModalComponent,onCompleteJob:H,class:""},null,8,["jobs","onShowModal"])])])):(a(),n("div",St,[e[22]||(e[22]=t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-12 w-12 mx-auto text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})],-1)),e[23]||(e[23]=t("h3",{class:"mt-2 text-lg font-medium text-primary-dark"},"No jobs found",-1)),t("p",Dt,"This customer doesn't have any "+l(i.value==="all"?"":i.value)+" jobs yet",1),t("button",{onClick:e[3]||(e[3]=C=>O(m)?m.value=!0:m=!0),class:"mt-4 px-4 py-2 bg-secondary-DEFAULT text-white rounded-lg hover:bg-secondary-dark transition-colors flex items-center mx-auto"},e[21]||(e[21]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),p(" Create New Job ",-1)]))]))])])]}),_:1}))}},qt=ot(Pt,[["__scopeId","data-v-06059fef"]]);export{qt as default};
