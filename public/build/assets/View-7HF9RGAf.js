import{_ as k}from"./AuthenticatedLayout-BR9VpTxd.js";import N from"./InvoiceFooter-Bm_gzw7C.js";import{g as y,c as C,o as n,w as D,a as g,b as e,d as I,h as j,j as o,k as i,t as s,n as h,f as b,F as S,q as E}from"./app-BfhD020g.js";import{_ as V}from"./_plugin-vue_export-helper-DlAUqK2U.js";const A={ref:"invoiceContainer",id:"invoiceContainer",class:"max-w-5xl mx-auto p-8 bg-white text-gray-800 shadow-lg rounded-lg"},O={class:"flex justify-between items-start mb-8 pb-6 border-b-2 border-gray-200"},P={class:"flex items-start"},T={key:0,class:"mr-4"},B=["src","alt"],L={class:"text-2xl font-bold text-primary mb-2"},U={class:"text-gray-500 mb-1"},$={class:"text-gray-500"},J={key:0},G={key:1},q={key:2},F={class:"text-right"},R={class:"space-y-1"},H={id:"billToAndJob",class:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-8"},M={class:"space-y-1"},Q={class:"font-bold"},z={key:0},W={key:1},K={key:2},X={key:0},Y={class:"space-y-2"},Z={key:0,class:"font-semibold"},ee={key:1},te={key:2},se={key:0},ne={key:1},oe={key:3},ie={id:"invoiceItems",class:"mb-8"},le={class:"border border-gray-200 rounded overflow-hidden"},ae={class:"font-bold"},de={key:0,class:"text-gray-500 text-sm mt-1"},re={class:"mb-8 flex justify-end"},ue={class:"w-full md:w-72 space-y-2"},ce={class:"flex justify-between font-bold"},ve={key:0,class:"flex justify-between"},me={key:1,class:"flex justify-between"},pe={class:"flex justify-between border-t-2 border-gray-200 pt-2 font-bold text-lg"},be={class:"flex flex-col items-center justify-center"},ye={class:"pt-8 border-t-2 border-gray-200 text-center"},fe={key:0,class:"mb-6 text-center"},xe={class:"text-gray-500 text-sm italic leading-relaxed"},ge={class:"w-full flex items-center justify-center py-2 m-1"},he={__name:"View",props:{invoice:Object},setup(l){const m=l,r=y(()=>JSON.parse(m.invoice.business_snapshot)),c=y(()=>JSON.parse(m.invoice.customer_snapshot)),a=y(()=>JSON.parse(m.invoice.job_snapshot)),v=u=>new Intl.NumberFormat("en-NG",{style:"currency",currency:m.invoice.currency||"NGN"}).format(Number(u)),p=u=>u?new Date(u).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"}):"—",f=u=>({PAID:"bg-green-600 text-white px-2 py-0.5 rounded",PENDING:"bg-yellow-500 text-white px-2 py-0.5 rounded",OVERDUE:"bg-red-600 text-white px-2 py-0.5 rounded",CANCELLED:"bg-gray-500 text-white px-2 py-0.5 rounded",IN_PROGRESS:"bg-yellow-400 text-white px-2 py-0.5 rounded"})[u.toUpperCase()]||"bg-gray-400 text-white px-2 py-0.5 rounded",_=({invoiceContainer:u})=>{const t=document.getElementById("invoiceContainer");if(console.log(t),!t)return;const d=window.open("","","width=800,height=600"),x=Array.from(document.querySelectorAll('link[rel="stylesheet"], style')).map(w=>w.outerHTML).join("");d.document.write(`
        <html>
        <head>
            <title>Print Invoice</title>
        ${x}
        </head>
        <body>
            ${t.innerHTML}
        </body>
        </html>
    `),d.document.close(),d.focus(),d.print(),d.close()};return(u,t)=>(n(),C(k,null,{default:D(()=>[g(I(j),{title:"Invoice"}),e("div",A,[e("header",O,[e("div",P,[r.value.logo?(n(),o("div",T,[e("img",{src:`/storage/${r.value.logo}`,alt:`${r.value.name} logo`,class:"w-20 h-20 object-contain"},null,8,B)])):i("",!0),e("div",null,[e("h1",L,s(r.value.name),1),e("p",U,s(r.value.address),1),e("p",$,[r.value.phone?(n(),o("span",J,s(r.value.phone),1)):i("",!0),r.value.phone&&r.value.email?(n(),o("span",G," • ")):i("",!0),r.value.email?(n(),o("span",q,s(r.value.email),1)):i("",!0)])])]),e("div",F,[t[4]||(t[4]=e("h2",{class:"text-xl font-semibold mb-4"},"INVOICE",-1)),e("div",R,[e("div",null,[t[0]||(t[0]=e("span",{class:"font-bold mr-2"},"Invoice #:",-1)),e("span",null,s(l.invoice.invoice_number),1)]),e("div",null,[t[1]||(t[1]=e("span",{class:"font-bold mr-2"},"Date:",-1)),e("span",null,s(p(l.invoice.issue_date)),1)]),e("div",null,[t[2]||(t[2]=e("span",{class:"font-bold mr-2"},"Due Date:",-1)),e("span",null,s(p(l.invoice.due_date)),1)]),e("div",null,[t[3]||(t[3]=e("span",{class:"font-bold mr-2"},"Status:",-1)),e("span",{class:h(f(l.invoice.status))},s(l.invoice.status.toUpperCase()),3)])])])]),e("section",H,[e("div",null,[t[5]||(t[5]=e("h3",{class:"text-blue-600 text-lg mb-4 border-b border-gray-200 pb-2"},"Bill To",-1)),e("div",M,[e("p",Q,s(c.value.name),1),c.value.company?(n(),o("p",z,s(c.value.company),1)):i("",!0),c.value.phone?(n(),o("p",W,s(c.value.phone),1)):i("",!0),c.value.email?(n(),o("p",K,s(c.value.email),1)):i("",!0)])]),a.value?(n(),o("div",X,[t[7]||(t[7]=e("h3",{class:"text-blue-600 text-lg mb-4 border-b border-gray-200 pb-2"},"Job Details",-1)),e("div",Y,[a.value.title?(n(),o("p",Z,s(a.value.title),1)):i("",!0),a.value.description?(n(),o("p",ee,s(a.value.description),1)):i("",!0),a.value.start_date||a.value.due_date?(n(),o("div",te,[a.value.start_date?(n(),o("span",se,s(p(a.value.start_date)),1)):i("",!0),a.value.due_date?(n(),o("span",ne," - "+s(p(a.value.due_date)),1)):i("",!0)])):i("",!0),a.value.status?(n(),o("p",oe,[t[6]||(t[6]=b(" Status: ",-1)),e("span",{class:h(f(a.value.status))},s(a.value.status.toUpperCase()),3)])):i("",!0)])])):i("",!0)]),e("section",ie,[t[12]||(t[12]=e("h3",{class:"text-blue-600 text-lg mb-4 border-b border-gray-200 pb-2"},"Invoice Items",-1)),e("div",le,[t[11]||(t[11]=e("div",{class:"grid grid-cols-4 bg-primary-dark text-white font-bold p-4"},[e("div",null,"Description"),e("div",null,"Qty"),e("div",null,"Unit Price"),e("div",null,"Amount")],-1)),(n(!0),o(S,null,E(l.invoice.items,(d,x)=>(n(),o("div",{key:d.id,id:"invoiceItemsDetails",class:"grid grid-cols-4 gap-2 md:gap-0 p-4 border-b border-gray-200 items-center last:border-b-0"},[e("div",null,[e("div",ae,s(d.name),1),d.description?(n(),o("div",de,s(d.description),1)):i("",!0)]),e("div",null,[t[8]||(t[8]=e("span",{class:"font-bold md:hidden print:hidden"},"Quantity: ",-1)),b(s(d.quantity),1)]),e("div",null,[t[9]||(t[9]=e("span",{class:"font-bold md:hidden print:hidden"},"Unit Price: ",-1)),b(s(v(d.unit_price)),1)]),e("div",null,[t[10]||(t[10]=e("span",{class:"font-bold md:hidden print:hidden"},"Amount: ",-1)),b(s(v(d.total)),1)])]))),128))])]),e("section",re,[e("div",ue,[e("div",ce,[t[13]||(t[13]=e("span",null,"Subtotal",-1)),e("span",null,s(v(l.invoice.subtotal)),1)]),l.invoice.tax>0?(n(),o("div",ve,[t[14]||(t[14]=e("span",null,"Tax",-1)),e("span",null,s(v(l.invoice.tax)),1)])):i("",!0),l.invoice.discount>0?(n(),o("div",me,[t[15]||(t[15]=e("span",null,"Discount",-1)),e("span",null,"-"+s(v(l.invoice.discount)),1)])):i("",!0),e("div",pe,[t[16]||(t[16]=e("span",null,"Total",-1)),e("span",null,s(v(l.invoice.total)),1)])])]),e("div",be,[e("footer",ye,[l.invoice.notes?(n(),o("div",fe,[t[17]||(t[17]=e("h4",{class:"mb-2 font-semibold text-gray-800"},"Notes",-1)),e("p",xe,s(l.invoice.notes),1)])):i("",!0)])])],512),e("div",ge,[g(N,{onPrint:_})])]),_:1}))}},Ce=V(he,[["__scopeId","data-v-ce8bf57a"]]);export{Ce as default};
