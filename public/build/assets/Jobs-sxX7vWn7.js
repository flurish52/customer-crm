import{A as D}from"./aos-BR47gbSh.js";import{g as n,o as r,b as e,m as u,a as g,c as k,w as C,F as E,H as L,t as c,n as M,i as V,e as N,f as J,L as F,T as U,y as H,s as I,d as S,z as P}from"./app-b2jftaPc.js";import{g as R}from"./index-CH_iu5NA.js";import{V as q}from"./ViewJob-C3UJauKg.js";import{C as G}from"./CreateJob-DQSDFzYx.js";import{_ as j}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{a as O}from"./AuthenticatedLayout-B5RKloO-.js";import{r as W}from"./PlusIcon-CVbTpwXO.js";import"./CurrencyDollarIcon-BDuMezin.js";import"./UserIcon-AKME3MdA.js";function Y(p,v){return r(),n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"})])}const K={class:"space-y-4"},Q=["data-index"],X={class:"flex justify-between items-start mb-3"},Z={class:"max-w-[80%]"},ee={class:"font-semibold text-lg truncate text-primary-dark"},te={class:"text-sm mt-1 opacity-80 truncate text-secondary-gray-400"},se={class:"mt-4 pt-4",style:{borderTop:"1px solid rgba(var(--primary-rgb), 0.1)"}},oe={class:"flex justify-between items-center"},re={class:"space-y-2"},ae={class:"flex items-center"},ne={class:"p-2 rounded-lg mr-2",style:{background:"rgba(var(--primary-rgb), 0.1)"}},le={xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",style:{color:"var(--primary)"}},ie={class:"text-sm font-medium"},de={key:0,class:"flex items-center"},ce={class:"p-2 rounded-lg mr-2",style:{background:"rgba(var(--primary-rgb), 0.1)"}},ue={xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",style:{color:"var(--primary)"}},me={class:"text-xs"},pe={key:0,class:"flex items-center rounded-full px-3 py-1.5 backdrop-blur-sm",style:{background:"rgba(var(--primary-rgb), 0.15)"}},ve={xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",style:{color:"var(--primary)"}},he={class:"text-xs font-medium"},fe={class:"flex justify-end space-x-3 mt-5"},ge=["onClick"],we={xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",style:{color:"var(--primary)"}},ye=["onClick"],be=["onClick"],xe={class:"border rounded-lg p-5",style:{backgroundColor:"var(--secondary)",borderColor:"var(--tertiary)"}},_e={__name:"Jobs",props:{jobs:{type:Array,required:!0},showModal:Boolean,allCustomers:Array},emits:["closeModal","showModal","update"],setup(p,{emit:v}){const m=v,l=u(null),i=u({}),h=u(!1),f=u({}),b=s=>{m("showModal"),f.value=s,h.value=!0,i.value=s.customer},w=()=>{$()},y=s=>{s.style.opacity=0,s.style.transform="translateY(20px)"},x=(s,t)=>{R.to(s,{opacity:1,y:0,duration:.5,delay:s.dataset.index*.1,onComplete:t})},d=s=>{l.value=s},a=s=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(s),_=s=>new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),A=()=>{l.value=null},$=()=>{m("closeModal"),f.value="",h.value=!1,i.value={}},T=s=>{confirm(`Are you sure you want to delete "${s.job_title}"?`)&&H.delete(`/job_delete/${s.id}`).then(t=>{t.status===200&&(m("update"),alert(t.data))}).catch(t=>{console.error("Error deleting job:",t),alert("Failed to delete job. Please try again.")})};return(s,t)=>(r(),n(E,null,[g(G,{showModal:p.showModal,customer:i.value,isEditingJob:h.value,jobToEdit:f.value,allCustomers:p.allCustomers,onClose:$,onSubmit:w},null,8,["showModal","customer","isEditingJob","jobToEdit","allCustomers"]),e("div",K,[l.value?(r(),k(U,{key:1,name:"fade-slide",mode:"out-in"},{default:C(()=>[e("div",xe,[g(q,{onCloseModal:A,selectedJob:l.value},null,8,["selectedJob"])])]),_:1})):(r(),k(F,{key:0,name:"staggered-fade",tag:"div",class:"space-y-3",appear:"",onBeforeEnter:y,onEnter:x},{default:C(()=>[(r(!0),n(E,null,L(p.jobs,(o,z)=>(r(),n("div",{key:o.id,"data-index":z,class:"bg-gradient-to-br from-white to-primary/20 border border-primary shadow-md p-2 rounded-xl cursor-pointer transition-all duration-300 hover:shadow-xl hover:-translate-y-1.5"},[e("div",X,[e("div",Z,[e("h3",ee,c(o.job_title),1),e("p",te,c(o.customer.company)+" â€¢ "+c(o.customer.name),1)]),e("span",{class:M([{"bg-gray-100 text-gray-700":!o.status,"bg-green-100 text-green-700":o.status==="completed","bg-blue-100 text-blue-700":o.status==="in_progress","bg-yellow-100 text-yellow-700":o.status==="pending","bg-red-100 text-red-700":o.status==="overdue"},"text-xs font-medium px-3 py-1 rounded-full capitalize shadow-sm transform transition-all hover:scale-105"])},c(o.status),3)]),e("div",se,[e("div",oe,[e("div",re,[e("div",ae,[e("div",ne,[(r(),n("svg",le,t[0]||(t[0]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)])))]),e("span",ie,c(a(o.amount)),1)]),o.due_date?(r(),n("div",de,[e("div",ce,[(r(),n("svg",ue,t[1]||(t[1]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"},null,-1)])))]),e("span",me,"Due: "+c(_(o.due_date)),1)])):V("",!0)]),o.satisfaction_score?(r(),n("div",pe,[(r(),n("svg",ve,t[2]||(t[2]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M14 10h4.764a2 2 0 011.789 2.894l-3.5 7A2 2 0 0115.263 21h-4.017c-.163 0-.326-.02-.485-.06L7 20m7-10V5a2 2 0 00-2-2h-.095c-.5 0-.905.405-.905.905 0 .714-.211 1.412-.608 2.006L7 11v9m7-10h-2M7 20H5a2 2 0 01-2-2v-6a2 2 0 012-2h2.5"},null,-1)]))),e("span",he,c(o.satisfaction_score)+"/5",1)])):V("",!0)]),e("div",fe,[e("button",{onClick:N(B=>d(o),["stop"]),class:"group flex items-center justify-center p-2 rounded-lg transition-all duration-200 hover:bg-white hover:shadow-md",style:{border:"1px solid rgba(var(--primary-rgb), 0.3)"}},[(r(),n("svg",we,t[3]||(t[3]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"},null,-1)]))),t[4]||(t[4]=e("span",{class:"sr-only"},"View",-1))],8,ge),e("button",{onClick:B=>b(o),class:"group flex items-center justify-center p-2 rounded-lg transition-all duration-200 hover:bg-white hover:shadow-md",style:{border:"1px solid rgba(239, 68, 68, 0.3)"}},t[5]||(t[5]=[J(" Edit ",-1),e("span",{class:"sr-only"},"Edit",-1)]),8,ye),e("button",{onClick:B=>T(o),class:"group flex items-center justify-center p-2 rounded-lg transition-all duration-200 hover:bg-white hover:shadow-md",style:{border:"1px solid rgba(239, 68, 68, 0.3)"}},t[6]||(t[6]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),e("span",{class:"sr-only"},"Delete",-1)]),8,be)])])],8,Q))),128))]),_:1}))])],64))}},ke=j(_e,[["__scopeId","data-v-36f113e1"]]),Ce={class:"space-y-6"},Me={class:"flex flex-col justify-between gap-4 md:flex-row md:items-center","data-aos":"fade-down","data-aos-duration":"300"},Je={class:"flex gap-3"},$e={"data-aos":"fade-up","data-aos-duration":"400","data-aos-delay":"100"},Be={__name:"Jobs",props:{jobs:Array},setup(p){const v=u(!1),m=u(null),l=u(!1),i=u(null),h=d=>{i.value=d},f=()=>{i.value=null},b=()=>{axios.get("/get_customer").then(d=>{m.value=d.data}).catch(d=>{console.error("API error:",d)})},w=()=>{l.value=!0,P.reload({preserveScroll:!0,onFinish:()=>{l.value=!1}})},y=()=>{b(),v.value=!0},x=()=>{v.value=!1,m.value=null};return I(()=>{D.init({once:!0,easing:"ease-out-cubic",offset:50})}),(d,a)=>(r(),k(O,null,{default:C(()=>[e("div",Ce,[e("div",Me,[a[3]||(a[3]=e("div",null,[e("h1",{class:"text-2xl font-bold tracking-tight text-gray-900"},"Jobs"),e("p",{class:"mt-1 text-sm text-gray-500"},"Track current and completed work")],-1)),e("div",Je,[e("button",{onClick:w,class:"btn-secondary hover:scale-[1.02] transition-transform",onMouseenter:a[0]||(a[0]=_=>h("refresh")),onMouseleave:f},[g(S(Y),{class:M(["w-5 h-5 mr-2 transition-transform duration-300",{"rotate-180":l.value||i.value==="refresh"}])},null,8,["class"]),J(" "+c(l.value?"Refreshing...":"Refresh"),1)],32),e("button",{onClick:y,class:"btn-primary hover:scale-[1.02] transition-transform",onMouseenter:a[1]||(a[1]=_=>h("newJob")),onMouseleave:f},[g(S(W),{class:M(["w-5 h-5 mr-2 transition-transform",{"scale-125":i.value==="newJob"}])},null,8,["class"]),a[2]||(a[2]=J(" New Job ",-1))],32)])]),e("div",$e,[g(ke,{showModal:v.value,jobs:p.jobs,allCustomers:m.value,onCloseModal:x,onShowModal:y,onUpdate:w,class:"mt-6"},null,8,["showModal","jobs","allCustomers"])])])]),_:1}))}},Fe=j(Be,[["__scopeId","data-v-44d751ef"]]);export{Fe as default};
